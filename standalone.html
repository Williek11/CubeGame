<!DOCTYPE html><html><head>
  <title>Cube Game</title>
<style id="colorStyle"></style>
<style>html{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;image-rendering:pixelated}:focus{outline:0}input{border:none;border-radius:0}.full div,.full input,.full span{position:fixed}body,html{margin:0;padding:0;text-align:center;font-family:Oxanium;overflow:hidden;background:var(--game-background)}#back,#customizeButton,#exitLevel,.ball,.levelCircle,.menu_container{cursor:pointer}#customize_menu{cursor:default}#back,#customization,#customize_menu,#customizedLevels,#game,#levelSelector,#selector,#settings{display:none}#game,#game_background,#menu,.full,canvas{position:fixed;left:0;top:0;width:100%;height:100%}#menu{background:var(--menu-background);width:100%;height:100%;color:var(--menu-color);text-shadow:0 1px 2px var(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow);font-weight:900}.menu_container{background:var(--menu_container-background);height:175px;width:300px;position:fixed;left:calc(50% - calc(150px + var(--menu_container-borderThickness)));top:calc(50% - calc(97.5px + var(--menu_container-borderThickness)));border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.menu_container h2{width:100%;height:50px;line-height:50px;font-size:20px;margin:0;padding:0}.menu_container h3{width:100%;height:10px;line-height:10px;font-size:16px;margin:0;padding:0}#customization{position:fixed;left:calc(50% - calc(300px + var(--menu_container-borderThickness)));top:100px;border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.menus_customization{display:none;background:var(--menu_container-background);height:350px;width:600px;position:fixed;left:calc(50% - calc(300px + var(--menu_container-borderThickness)));top:100px;border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.customization1{width:50%;height:175px;background:var(--menu_container-background-top);border-radius:var(--menu_container-borderRadius) var(--menu_container-borderRadius) 0 0}.customization2{width:50%;height:175px;background:var(--menu_container-background-bottom);border-radius:0 0 var(--menu_container-borderRadius) var(--menu_container-borderRadius)}#customize_menu{height:350px;top:calc(50% - calc(175px + var(--menu_container-borderThickness)))}.switch{left:80px;width:calc(100% - 160px);height:10px;position:absolute;background:#666;border-radius:10px;box-shadow:0 2px 2px #222;border:2px #000 solid}.ball{position:relative;top:-7.5px;width:20px;height:20px;border:2px #000 solid;background:#fff;box-shadow:0 2px 2px #222;border-radius:25%}.ball.inactive{left:-10px;background:#666}.ball.active{left:calc(100% - 20px);background:#38e861}.switch_name{width:100%;text-align:center;font-size:14px;height:20px;line-height:20px;position:absolute;left:0}.selector_option{width:100%;height:175px}.selector_option:first-child{background:var(--menu_container-background-top);border-radius:var(--menu_container-borderRadius)}.selector_option:nth-child(2){background:var(--menu_container-background-bottom);border-radius:0 0 var(--menu_container-borderRadius) var(--menu_container-borderRadius)}.textMiddle{width:100%;height:50px;line-height:0;top:calc(50% - 10px);position:relative;font-size:20px}#levelSelector{background:var(--levelSelector-background);color:var(--levelSelector-text);width:100%;height:100%;left:0;top:0;position:fixed;overflow-x:scroll}#levelSelector::-webkit-scrollbar-thumb{background-color:#6669;box-shadow:0 0 5px #000}#levelSelector::-webkit-scrollbar-thumb:hover{background-color:#5559}#levelSelector::-webkit-scrollbar-thumb:active{background-color:#4449}#levelSelector::-webkit-scrollbar-track{background-color:transparent}#levelSelector::-webkit-scrollbar{width:13px}.levelCircle{width:50px;height:50px;background:var(--levelSelector_circleLevel-background);border-radius:50%;box-shadow:0 2px 5px var(--levelSelector_circleLevel-shadow);line-height:50px;color:var(--levelSelector_circleLevel-color);font-weight:100}#back,#exitLevel{position:fixed;background:var(--backButton-background);border:var(--backButton-borderThickness) var(--backButton-border) solid;border-radius:var(--backButton-borderRadius);box-shadow:var(--backButton-shadow-offsetX) var(--backButton-shadow-offsetY) var(--backButton-shadow-blur) var(--backButton-shadow);color:var(--backButton-text);width:70px;height:30px;font-size:17px;line-height:30px;text-align:center}#back{left:10px;bottom:10px}#exitLevel{right:10px;top:10px}#game_background{background:var(--game-background)}#customizeButton{background:var(--customize-background);position:fixed;left:calc(50% - calc(100px + var(--customize-border-thickness)));width:200px;top:280px;border:var(--customize-border-thickness) var(--customize-border-color) solid;height:30px;line-height:30px;box-shadow:var(--customize-shadow-offsetX) var(--customize-shadow-offsetY) var(--customize-shadow-blur) var(--customize-shadow-color);border-radius:var(--customize-border-radius)}#customizeButton:active{top:285px;box-shadow:none}.consoleError{background:#f55b49;border:2px #752a22 solid;width:150px;height:150px;position:absolute;right:40px;bottom:40px;text-align:left;color:#fff}.consoleError h2{margin:5px 0 0 25px}.consoleError span{margin:2.5px 0 0 20px}.consoleMessage{background:#222;box-shadow:0 3px 4px #000 solid;width:150px;height:150px;position:absolute;right:40px;bottom:40px;text-align:left;color:#fff}.consoleMessage h2{margin:5px 0 0 25px}.consoleMessage span{margin:2.5px 0 0 20px}.cooldownBorder{width:30px;height:30px;border:10px #2e234eaa solid;display:none;margin-top:20px}.cooldownBackground{width:30px;height:30px;background:#3d3067aa;overflow:hidden;position:relative;display:none}.cooldownFill{width:30px;height:100%;background:#fffa;left:0;bottom:0;position:absolute}#cooldowns{top:105px;left:40px;position:absolute;display:grid}.information{position:absolute;width:250px;height:150px;background:#100c1c;display:none;color:var(--game-text);padding:20px;text-align:left;box-shadow:0 5px #0006}.information h2{padding:5px 0 5px 0;margin:0;font-size:20px;line-height:20px}.information div{background-image:linear-gradient(90deg,#aaa,#fff);width:100%;height:1px;margin-bottom:10px}.information p{margin:0;padding:0;font-size:12px}#healthInformation{bottom:115px;right:25px}#healthNew{background-image:url(https://raw.githubusercontent.com/Williek11/CubeGame/master/Files/GUI.png);width:75px;height:75px;background-size:100%;position:absolute;right:25px;bottom:25px;box-shadow:0 5px #0006}#healthBackground{width:51px;height:51px;right:37px;bottom:37px;position:absolute;background:#06000d;overflow:hidden}#healthFill{width:51px;height:100%;position:absolute;background:#46d56a;left:0;bottom:-51px}@keyframes disappear{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes appear{from{opacity:0;transform:scale(2)}to{opacity:1;transform:scale(1)}}@keyframes opDisappear{from{opacity:1}to{opacity:0}}@keyframes opAppear{from{opacity:0}to{opacity:1}}@keyframes upDown{0%{transform:translateY(15px)}50%{transform:translateY(-15px)}100%{transform:translateY(15px)}}@keyframes appearGameConsole{from{opacity:0;transform:translateX(200px)}to{opacity:1}}@keyframes disappearGameConsole{from{opacity:1}to{opacity:0;transform:translateX(200px)}}@keyframes damaged{50%{transform:rotate(10deg);box-shadow:0 0 10px #a31111}}@keyframes healed{50%{transform:rotate(10deg);box-shadow:0 0 10px #46d56a}}@keyframes rotate{50%{transform:rotate(10deg)}}*{font-weight:600}</style></head>
<body>
<div id="menu"><div id="settings"><div class="menu_container"id="settings_menu"><div class="selector_option"id="customize"onclick="menu.settingsToCustomize()"><span class="textMiddle">Customize</span></div></div><div class="menu_container"id="customize_menu"><div class="selector_option"style="border-radius:var(--menu_container-borderRadius) var(--menu_container-borderRadius) 0 0"><h2>Customization</h2><h3>Color Themeing</h3><div class="switch"style="top:85px"><div class="ball inactive"onclick="themes(0,0)"></div></div><div class="switch_name"style="top:110px">Dark Mode</div><div class="switch"style="top:155px"><div class="ball inactive"onclick="themes(1,1)"></div></div><div class="switch_name"style="top:180px">Black and White Mode</div></div><div class="selector_option"></div></div></div><div id="select"><h2 style="margin-top:75px">Cube Game</h2><p onclick="menu.selectToSelector()">Start<p onclick="menu.selectToSettings()">Settings</div><div id="selector"><div class="menu_container"id="typeOfLevel"><div class="selector_option"id="levels"onclick="menu.selectToLevel()"><span class="textMiddle">Levels</span></div></div></div></div>
<div id="levelSelector"><h2 style="position:fixed;text-align:center;width:100%">Levels</h2><div id="theLevels"></div></div><div id="back">Back</div><div id="game"><div id="game_background"></div><canvas id="canvas"></canvas><div id="additionalText"></div><div id="exitLevel">Exit</div><div id="game_console"></div><div id="cooldowns"><div id="dashBorder"class="cooldownBorder"><div id="dashBackground"class="cooldownBackground"><div id="dashFill"class="cooldownFill"></div></div></div><div id="speedBorder"class="cooldownBorder"><div id="speedBackground"class="cooldownBackground"><div id="speedFill"class="cooldownFill"></div></div></div></div><div id="healthBackground"><div id="healthFill"></div></div><div id="healthNew"></div><div id="healthInformation"class="information"><h2>Health</h2><div></div><p id="health"></div></div>

<script>"undefined"==localStorage.knowV1&&(localStorage.knowV2="undefined",localStorage.knowV1="","undefined"==localStorage.active&&(localStorage.active=JSON.stringify([!1,!1,!1])))
void 0==localStorage.active&&(localStorage.active="[false,false,false]");let active=JSON.parse(localStorage.active);const colorStyle=document.getElementById("colorStyle"),colors={default:()=>{const o=()=>colors.HTML,e=()=>o().menu,c=()=>e().container,t=()=>o().levelSelector,a=()=>t().circleLevel,r=()=>o().backButton,s=()=>c().customize;e().background="#aaa",e().color="#fff",e().textShadow="#000",c().background="#ccc",c().background_top="#ddd",c().background_bottom="#ccc",c().shadow="#666",c().borderColor="#0009",c().borderRadius="20px",c().borderThickness="1px",t().background="#222",t().text="#fff",a().background="#aaa",a().shadow="#000",a().color="#000",r().background="#111",r().text="#fff",r().border="#000",r().borderRadius="5px",r().borderThickness="1px",r().shadow="#000",r().shadowOffsetY="2px",r().shadowOffsetX="0",r().shadowBlur="5px",o().game.background="#090710",o().game.text="#fff",o().game.gridLevel="#010103",s().background="#888888",s().borderRadius="5px",s().borderColor="#333333",s().borderThickness="2px",s().shadowOffsetX="0",s().shadowOffsetY="2px",s().shadowBlur="2px",s().shadowColor="#000",colors.entities.player="#00FF00",colors.entities.enemy.normal="#FF0000",colors.entities.enemy.hit="#AA0000",colors.entities.enemy.highLight="770000",colors.entities.bonus.health="#FFFF00",colors.entities.bonusMove.slow="#ffffff",colors.entities.projectile.bullet="#FF00FF",colors.entities.projectile.missile="#FF881C"},HTML:{menu:{background:"#aaa",color:"#fff",textShadow:"#000",container:{background:"#ccc",background_top:"#ddd",background_bottom:"#ccc",shadow:"#666",borderColor:"#000",borderRadius:"20px",borderThickness:"0",customize:{background:"#888",borderColor:"#333",borderRadius:"5px",borderThickness:"2px",shadowColor:"#000",shadowOffsetY:"2px",shadowOffsetX:"0",shadowBlur:"2px"}}},levelSelector:{background:"#222",text:"#fff",circleLevel:{background:"#aaa",shadow:"#000",color:"#000"}},backButton:{background:"#111",text:"#fff",border:"#000",borderRadius:"5px",borderThickness:"1px",shadow:"#000",shadowOffsetY:"2px",shadowOffsetX:"0",shadowBlur:"5px"},game:{background:"#090710",gridLevel:"#010103",text:"#fff"}},entities:{player:"#00FF00",enemy:{normal:"#FF0000",hit:"#AA0000",highLight:"#770000"},bonus:{health:"#FFFF00"},bonusMove:{slow:"#ffffff"},projectile:{bullet:"#FF00FF",missile:"#FF881C"}},updateHTML:function(){colorStyle.innerHTML=`:root {\n            --menu-background:${colors.HTML.menu.background};\n            --menu-color:${colors.HTML.menu.color};\n            --menu-shadow:${colors.HTML.menu.textShadow};\n            --menu_container-background-top:${colors.HTML.menu.container.background_top};\n            --menu_container-background-bottom: ${colors.HTML.menu.container.background_bottom};\n            --menu_container-shadow: ${colors.HTML.menu.container.shadow};\n            --menu_container-background: ${colors.HTML.menu.container.background};\n            --menu_container-borderColor: ${colors.HTML.menu.container.borderColor};\n            --menu_container-borderRadius: ${colors.HTML.menu.container.borderRadius};\n            --menu_container-borderThickness: ${colors.HTML.menu.container.borderThickness};\n\n            --customize-background: ${colors.HTML.menu.container.customize.background};\n            --customize-border-color: ${colors.HTML.menu.container.customize.borderColor};\n            --customize-border-radius: ${colors.HTML.menu.container.customize.borderRadius};\n            --customize-border-thickness: ${colors.HTML.menu.container.customize.borderThickness};\n            --customize-shadow-color: ${colors.HTML.menu.container.customize.shadowColor};\n            --customize-shadow-offsetY: ${colors.HTML.menu.container.customize.shadowOffsetY};\n            --customize-shadow-offsetX: ${colors.HTML.menu.container.customize.shadowOffsetX};\n            --customize-shadow-blur: ${colors.HTML.menu.container.customize.shadowBlur};\n\n            --levelSelector-background: ${colors.HTML.levelSelector.background};\n            --levelSelector-text: ${colors.HTML.levelSelector.text};\n            --levelSelector_circleLevel-background: ${colors.HTML.levelSelector.circleLevel.background};\n            --levelSelector_circleLevel-shadow: ${colors.HTML.levelSelector.circleLevel.shadow};\n            --levelSelector_circleLevel-color: ${colors.HTML.levelSelector.circleLevel.color};\n\n            --backButton-background: ${colors.HTML.backButton.background};\n            --backButton-text: ${colors.HTML.backButton.text};\n            --backButton-border: ${colors.HTML.backButton.border};\n            --backButton-borderRadius: ${colors.HTML.backButton.borderRadius};\n            --backButton-borderThickness: ${colors.HTML.backButton.borderThickness};\n            --backButton-shadow: ${colors.HTML.backButton.shadow};\n            --backButton-shadow-offsetY: ${colors.HTML.backButton.shadowOffsetY};\n            --backButton-shadow-offsetX: ${colors.HTML.backButton.shadowOffsetX};\n            --backButton-shadow-blur: ${colors.HTML.backButton.shadowBlur};\n\n            --game-background: ${colors.HTML.game.background};\n            --game-text: ${colors.HTML.game.text};\n        }`}},colorsFunc=[()=>{const o=()=>colors.HTML,e=()=>o().menu,c=()=>e().container,t=()=>c().customize;active=[!0,!1,!1],localStorage.active=JSON.stringify(active),e().background="#1a1a1a",c().background="#000",c().background_top="#141414",c().background_bottom="#0e0e0e",c().shadow="#000",c().borderThickness="1px",(()=>o().levelSelector)().background="#111",o().game.text="#fff",t().background="#050505",t().borderRadius="3px",t().borderColor="#000",t().borderThickness="2px",t().shadowOffsetX="0",t().shadowOffsetY="2px",t().shadowBlur="2px",t().shadowColor="#000",colors.entities.enemy.highLight="#770000",colors.entities.bonusMove.slow="#ffffff"},()=>{active=[!1,!0,!1],localStorage.active=JSON.stringify(active);const o=()=>colors.entities;(()=>colors.HTML)().game.text="#fff",o().bonus.health="#707070",o().bonusMove.slow="#FFFFFF",o().enemy.hit="#808080",o().enemy.normal="#a3a3a3",o().enemy.highLight="#5a5a5a",o().projectile.bullet="#dfdfdf",o().projectile.missile="#4d4d4d",o().player="#FFFFFF"}],activated=()=>{colors.default();if(0==(()=>{for(var o=!1,e=0;e<active.length;e++)if(active[e]){o=!0;break}return o})())colors.updateHTML();else for(var o=0,e=active.length;o<e;o++){const e=document.getElementsByClassName("switch")[o],c=document.getElementsByClassName("ball")[o];if(!0===active[o])switch(e.style.background="#38e861",c.className="ball active",colors.updateHTML(),updateLS=(()=>{localStorage.active=JSON.stringify(active)}),o){case 0:colorsFunc[0](),colors.updateHTML();break;case 1:colorsFunc[1](),colors.updateHTML();break;case 2:active=[!1,!1,!0],updateLS()}}},themes=(o,e)=>{const c=document.getElementsByClassName("switch")[o],t=document.getElementsByClassName("ball")[o];if("ball inactive"===t.className){for(c.style.background="#38e861",t.className="ball active",updateLS=(()=>{localStorage.active=JSON.stringify(active)}),i=0,l=document.getElementsByClassName("ball").length;i<l;i++)if("ball active"===document.getElementsByClassName("ball")[i].className&&i!=o){document.getElementsByClassName("switch")[i].style.background="#666",document.getElementsByClassName("ball")[i].className="ball inactive";break}switch(colors.default(),colors.updateHTML(),e){case 0:colorsFunc[0](),colors.updateHTML();break;case 1:colorsFunc[1](),colors.updateHTML();break;case 2:active=[!1,!1,!0],updateLS()}}else active[e]=!1,localStorage.active=JSON.stringify(active),c.style.background="#666",t.className="ball inactive",colors.default(),colors.updateHTML()};activated();
const $F=[()=>1===Math.round(Math.random())?Math.random():-1*Math.random(),()=>1===Math.round(Math.random())?Math.random()*player.width:Math.random()*player.width*-1,()=>1===Math.round(Math.random())?10*Math.random():10*Math.random()*-1],$Ô=[(e,n,t)=>{for(let a in e)if(e[a][n]===t)return a},(e,n,t)=>{for(let a in e)e[a][n]===t&&e.splice(a,1)}],$Â=[(e,n)=>{for(let t in n)e.push(n[t])},(e,n)=>{let t=e.indexOf(n);t>-1&&e.splice(t,1)},(e,n)=>{for(let t in n){let a=e.indexOf(n[t]);a>-1&&e.splice(a,1)}}],$D=[e=>document.createElement(e),e=>document.getElementById(e),(e,n)=>document.querySelectorAll(e)[n],(e,n)=>document.getElementsByTagName(e)[n],(e,n)=>document.getElementsByClassName(e)[n],(e,n)=>{const t=$D[0]("style");t.id=n,t.innerHTML=e,Í[0].appendChild(t)},e=>{$D[0](e).innerHTML},e=>document.getElementsByClassName(e)],id={count:0,new:()=>(id.count++,id.count),reduce:()=>{id.count--}},valid=(e,n)=>{if(null==e||isNaN(e)||e==1/0){let t;null==e?t="null or undefined":isNaN(e)?t="Not a Number (NaN)":e==1/0&&(t="Infinity"),console.error("[Debug]: Value of "+e+" is equal to "+t+" on "+n+". Happened at "+new Date+".")}else if(0!=e)return!0};
const menu={back:{selectToSelector:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.style="display:none",$D[1]("selector").style.display="none",$D[1]("select").style.display="block"},selectToLevel:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToLevel),e.addEventListener("click",menu.back.selectToSelector),$D[1]("menu").style.display="block",$D[1]("selector").style.display="block",$D[1]("levelSelector").style="display:none"},typeOfLevelToCustomizedLevels:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.typeOfLevelToCustomizedLevels),e.addEventListener("click",menu.back.selectToSelector),$D[1]("typeOfLevel").style="display:block",$D[1]("customizedLevels").style="display:none"},selectToSettings:()=>{const e=$D[1]("back");e.style="display:none",e.removeEventListener("click",menu.back.selectToSettings),$D[1]("select").style.display="block",$D[1]("settings").style.display="none"},settingsToCustomize:()=>{const e=$D[1]("back");e.addEventListener("click",menu.back.selectToSettings),e.removeEventListener("click",menu.back.settingsToCustomize),$D[1]("settings_menu").style="display:block",$D[1]("customize_menu").style="display:none"}},selectToSelector:()=>{const e=$D[1]("back");e.style="display:block",e.addEventListener("click",menu.back.selectToSelector),$D[1]("select").style.display="none",$D[1]("selector").style.display="block"},typeOfLevelToCustomizedLevels:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.addEventListener("click",menu.back.typeOfLevelToCustomizedLevels),$D[1]("typeOfLevel").style="display:none",$D[1]("customizedLevels").style="display:block"},selectToLevel:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.addEventListener("click",menu.back.selectToLevel),$D[1]("menu").style.display="none",$D[1]("selector").style.display="none",$D[1]("levelSelector").style="display:block"},levels:()=>{$D[1]("levels").style="display:block;animation:appear 1 750ms"},selectToSettings:()=>{const e=$D[1]("back");e.style="display:block",e.addEventListener("click",menu.back.selectToSettings),$D[1]("select").style.display="none",$D[1]("settings").style.display="block"},settingsToCustomize:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSettings),e.addEventListener("click",menu.back.settingsToCustomize),$D[1]("settings_menu").style="display:none",$D[1]("customize_menu").style="display:block"},customizeToCustomizeMenu:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.settingsToCustomize),e.addEventListener("click",menu.back.customizeToCustomizeMenu),$D[1]("customize_menu").style="display:none",$D[1]("customization").style="display:block"}};
const knowLevel=[!0],levels={autoGenerated:[{name:"1",contents:()=>{const e=e=>{constructors.entity.enemy("nohealth",1,400-e,390,0,0,20,20,0,0)};e(10),e(210),e(-190);const t=(e,t)=>{constructors.text(30,e,t)};t(75,"Let me introduce you to the basics:"),t(60,"The most important principle is: when pressing shift, you can kill enemies and go faster."),t(45,"Also, you can go faster pressing Shift. Anyway, when you kill all enemies in a level, you procced to the next.")},onload:()=>{player.iX=390,player.iY=300},onend:[()=>{Game.corridorsVisible=!0;const e=e=>{constructors.entity.enemy("generic",1,1700-e,390,0,0,20,20,0,1)};e(10),e(110),e(-90),e(210),e(-190);const t=(e,t)=>{constructors.text(30,e,t)};Game.text.all=[],t(60,"Now, be introduced to enemies dropping health. 1/5 of the time they drop health, 4/5 of the time, nope!"),t(45,"Try it with those dummies. Also, an interesting note is that you can pick the bonus even with full HP."),Game.text.update()},()=>{Game.corridorsVisible=!0;const e=constructors.entity.enemy,t=(t,o)=>{e("nohealth",1,3e3-t,390,0,0,20,20,o,2)};t(10,2),t(160,1),t(-150,3);const o=(e,t)=>{constructors.text(30,e,t)};Game.text.all=[],o(75,"And now, the last concept you should be familiarized with (for now), damage!"),o(60,"Enemies can do different damage. Try it with these dummies!"),o(45,"Also, don't be scared. You regenerate!"),Game.text.update(),Game.tickEvents.push(()=>{player.health<10&&knowLevel[0]&&(knowLevel[0]=!1,setTimeout(()=>{player.onHit(-1),knowLevel[0]=!0},40*Game.tick))})},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"2",contents:()=>{const e=constructors.entity.enemy,t=t=>{e("generic",1,400-t,390,5,5,20,20,1,0)};t(10),t(210),t(-190)},onload:()=>{player.iX=390,player.iY=300},onend:[()=>{Game.corridorsVisible=!0;let e=360;const t=constructors.entity.enemy,o=o=>{t("generic",1,1700-o,e,5,5,20,20,1,1)};o(10),o(110),o(-90),o(210),o(-190),e=420,o(10),o(110),o(-90),o(210),o(-190)},()=>{Game.corridorsVisible=!0;const e=Math.random,t=Math.round,o=constructors.entity.enemy,n=()=>0===t(e())?10*e():10*-e();for(var i=0;i<10;i++)o("generic",1,2990,390,n(),n(),20,20,1,2)},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"3",contents:()=>{let e=390;constructors.text(30,45,"Oh, hey, those are little bullet things! They stop after hitting a wall or hitting you!");const t=constructors.entity.projectile,o=o=>{t("bullet",400-o,e,1,1,20,20,1,0)};o(10),o(110),o(-90),e=490,o(10),o(110),o(-90),e=290,o(10),o(110),o(-90)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,o=o=>{t("generic",1,1700-o,e,5,5,20,20,1,1)};o(10),o(110),o(-90),e=490,o(10),o(110),o(-90),e=290,o(10),o(110),o(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%100==0){const n=constructors.entity.projectile,i=Math.random,r=Math.round,s=()=>1===r(i())?10*i():10*-i();for(var e=0,t=Game.entities.all,o=t.length;e<o;e++)"enemy"===t[e].type&&n("bullet",t[e].x,t[e].y,s(),s(),20,20,1,t[e].chunkNmb)}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,o=()=>0===e(t())?10*t():10*-t(),n=constructors.entity.enemy,i=()=>{n("generic",1,2990,390,o(),o(),20,20,1,2)};i(),i(),i(),i(),i(),i(),i(),i(),i(),i()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"4",contents:()=>{let e=390;const t=constructors.entity.projectile;constructors.text(30,45,"Those are missile things! They go boom when hitting something!");const o=o=>{t("missile",400-o,e,1,1,20,20,1,0)};o(10),o(110),o(-90),e=490,o(10),o(110),o(-90),e=290,o(10),o(110),o(-90)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,o=o=>{t("generic",1,1700-o,e,5,5,20,20,1,1)};o(10),o(110),o(-90),e=490,o(10),o(110),o(-90),e=290,o(10),o(110),o(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%250==0){const n=constructors.entity.projectile,i=Math.random,r=Math.round,s=()=>1===r(i())?10*i():10*-i();for(var e=0,t=Game.entities.all,o=t.length;e<o;e++)"enemy"===t[e].type&&n("missile",t[e].x,t[e].y,s(),s(),20,20,1,t[e].chunkNmb)}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,o=()=>0===e(t())?10*t():10*-t(),n=constructors.entity.enemy,i=()=>{n("generic",1,2980,390,o(),o(),20,20,1,2)};i(),i(),i(),i(),i(),i(),i(),i(),i(),i()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"5",contents:()=>{const e=constructors.entity.bonusMove;constructors.text(30,45,"Oh, those are little slowing cubes- you should not touch'em. Well, I mean, you have to now...");(t=>{e("slow",400-t,390,1,1,20,20,0,void 0)})(10)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,o=o=>{t("generic",1,1700-o,e,5,5,20,20,1,1)};o(10),o(110),o(-90),e=490,o(10),o(110),o(-90),e=290,o(10),o(110),o(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%150==0){const n=constructors.entity.bonusMove,i=Math.random,r=Math.round,s=()=>1===r(i())?10*i():10*-i();for(var e=0,t=Game.entities.all,o=t.length;e<o;e++)if("enemy"===t[e].type){t[e].color=colors.entities.enemy.highLight,n("slow",t[e].x,t[e].y,s(),s(),20,20,t[e].chunkNmb,t[e].id);break}}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,o=()=>0===e(t())?10*t():10*-t(),n=constructors.entity.enemy,i=()=>{n("generic",1,2990,390,o(),o(),20,20,1,2)};i(),i(),i(),i(),i(),i(),i(),i(),i(),i()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"B",contents:()=>{constructors.entity.enemy("boss1",15,725,400,5,5,50,50,2,0)},onload:()=>{player.iX=740,player.iY=200},onend:[()=>{Game.stop()}],grid:{width:1500,height:800,corridor:[,],all:[{x:0,y:0}]}}],updateMenu:()=>{const e=$D[1]("theLevels");e.innerHTML="";let t,o=0,n=levels.autoGenerated.length;const i=Math.random,r=o=>{var n=document.createElement("div"),r=3+7*i();let s=100+150*o;t=150*o+200,n.style="position:absolute;left:"+s+"px;top:"+(()=>125+300*i())()+"px;",n.addEventListener("click",()=>{Game.start(o)}),n.innerHTML='<div class="levelCircle" style="animation:upDown infinite '+r+'s">'+levels.autoGenerated[o].name+"</div>",e.appendChild(n)};let s=document.createElement("div");for(;o<n;o++)r(o);s.style="width:"+t+"px;height:0.1px",e.appendChild(s)}};
let intervalStart,intervalMapUpdate;const Game={load:t=>{var e=document.createElement("script");e.setAttribute("src",t),document.head.appendChild(e),console.log("Loaded")},eventsInterpretor:t=>{const e=player.events[t];Game.keys[e.key]&&(!0===e.condition()?e.whenHappen():e.whenNo())},cursor:{x:0,y:0,mapX:0,mapY:0,events:{hover:[],click:[]}},corridorsVisible:!1,onEndEvent:0,ticksPassed:0,sure:!0,keys:{},canvas:$D[1]("canvas"),ctx:$D[1]("canvas").getContext("2d"),tick:20,tickEvents:[],debugAccess:!1,cooldowns:{dash:{active:!1,decrease:100/70,currentHeight:100,update:function(){const t=this.currentHeight-this.decrease;this.currentHeight=t,document.getElementById("dashFill").style.height=t+"%",t<0&&(this.currentHeight=100,this.active=!1,document.getElementById("dashBorder").style="",document.getElementById("dashBackground").style="")}},speed:{active:!1,decrease:.5,currentHeight:100,update:function(){const t=this.currentHeight-this.decrease;this.currentHeight=t,document.getElementById("speedFill").style.height=t+"%",t<0&&(this.currentHeight=100,this.active=!1,document.getElementById("speedBackground").style="",document.getElementById("speedBorder").style="")}}},stop:()=>{clearInterval(intervalStart),Game.index=void 0,Game.cursor.events.hover=[],Game.ticksPassed=0;const t=$D[1]("game");t.style.animation="disappear 1 1s";const e="animation:appear 1 1s;display:block";$D[1]("levelSelector").style=e,$D[1]("back").style=e,Game.text.all=[],Game.tickEvents=[],player.sX=0,player.sY=0,setTimeout(()=>{t.style="display:none"},900)},resize:()=>{Game.canvas.width=window.innerWidth,Game.canvas.height=window.innerHeight;const t=Game.cursor.events.hover.length;if(t>-1){const i=Game.cursor.events.hover;for(var e=0;e<t;e++)i[e].onResize()}},updateScreen:()=>{intervalMapUpdate=setInterval(()=>{const t=Game.ctx;t.clearRect(0,0,window.innerWidth,window.innerHeight),t.fillStyle=colors.HTML.game.gridLevel;const e=window.innerWidth/2+Game.cursor.mapX,i=window.innerHeight/2+Game.cursor.mapY;map.x=e,map.y=i;const s=e-player.x-player.width/2,h=i-player.y-player.height/2;map.refX=s,map.refY=h,t.fillRect(s,h,map.width,map.height);let a=levels.autoGenerated[Game.index].grid.all;for(let e=0,i=a.length;e<i;e++){let i=a[e];t.fillRect(s+i.x,h+i.y,map.width,map.height)}for(var l=0,n=Game.entities.all.length;l<n;l++)t.fillStyle=Game.entities.all[l].color,t.fillRect(s+Game.entities.all[l].x,h+Game.entities.all[l].y,Game.entities.all[l].width,Game.entities.all[l].height);t.fillStyle=player.color,t.fillRect(map.x-player.width/2,map.y-player.height/2,player.width,player.height)},Game.tick)},update:()=>{if(Game.entities.all.length>0){for(let t=Game.entities.all,e=t.length-1;e>=0;e--)t[e].del&&t.splice(e,1);for(let t=0,e=Game.tickEvents,i=e.length;t<i;t++)e[t]();for(let t=0,e=player.events.length;t<e;t++)Game.eventsInterpretor(t);Game.ticksPassed++,Game.cooldowns.dash.active&&Game.cooldowns.dash.update(),Game.cooldowns.speed.active&&Game.cooldowns.speed.update();const t=Game.ctx,e=window.innerWidth,i=window.innerHeight;t.clearRect(0,0,e,i);const s=e/2+Game.cursor.mapX,h=i/2+Game.cursor.mapY;map.x=s,map.y=h;const a=s-player.x-player.width/2,l=h-player.y-player.height/2;map.refX=a,map.refY=l;const n=map.all,o=n.length;t.fillStyle=colors.HTML.game.gridLevel;for(let e=0;e<o;e++){const i=n[e];t.fillRect(a+i.x,l+i.y,map.width,map.height)}for(let t=0,e=Game.entities.all,i=e.length;t<i;t++)e[t].update();t.fillStyle="#2e234eaa";const r=40,c=16;for(let e=0;e<o;e++){const i=n[e];t.fillRect(r+i.x/c,r+i.y/c,map.width/c,map.height/c)}if(Game.corridorsVisible){t.fillStyle=colors.HTML.game.gridLevel;let e=levels.autoGenerated[Game.index].grid.corridor[player.currentChunkNumber];const i=e.x,s=e.y,h=e.width,n=e.height;t.fillRect(a+i,l+s,h,n),t.fillStyle="#2e234eaa",t.fillRect(r+i/c,r+s/c-player.height/4,h/c,n/(c/4))}player.update()}else void 0!=Game.index&&(levels.autoGenerated[Game.index].onend[Game.onEndEvent](),Game.onEndEvent++)},entities:{
properties:{parentCheck:function(){parentAlive=!1;for(var t=0,e=Game.entities.all,i=e.length;t<i;t++)if(e[t].id===this.parentId){parentAlive=!0;break}!1===parentAlive&&(this.del=!0)},generic_enemy:{update:void 0,onHit:function(t){!0===valid(t,"function generic_enemy.onHit")&&(this.hp-=t,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0,1===Math.floor(5*Math.random())&&constructors.entity.bonus("health",this.x,this.y,this.width,this.height,this.chunkNmb)),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))}},generic_enemy_nohealth:{update:void 0,onHit:function(t){!0===valid(t,"function generic_enemy_nohealth.onHit")&&(this.hp-=t,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))}},boss1:{onHit:function(t){!0===valid(t,"function generic_enemy.onHit")&&(this.hp-=t,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0,1===Math.floor(5*Math.random())&&constructors.entity.bonus("health",this.x,this.y,this.width,this.height,this.chunkNmb)),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))},update:function(){Game.ctx.fillStyle=this.color;var t=this.x,e=this.y,i=this.chunk,s=this.width,h=this.height,a=i.x,l=i.y;const n=map.refX+t,o=map.refY+e;Game.ctx.fillRect(n,o,s,h),Game.ctx.fillRect(n-s/2,o-20,2*s/this.totalHP*this.hp,10);var r=()=>{this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*Game.tick)};if(this.hp>5)t<a?(this.sX*=-1,t=a,r()):t>a+map.width-s&&(this.sX*=-1,t=a+map.width-s,r()),e<l?(this.sY*=-1,e=l,r()):e>l+map.height-h&&(this.sY*=-1,e=l+map.height-h,r());else{let i,n,o=$F[2],c=s/5,m=h/5,d=this.chunkNmb,p=()=>{constructors.entity.projectile("bullet",i,n,o(),o(),c,m,1,d)},y=()=>{i=this.x+s/2.5,n=this.y+h/2.5;for(let t=0;t<25;t++)p()};t<a?(this.sX*=-1,t=a,r(),y()):t>a+map.width-s&&(this.sX*=-1,t=a+map.width-s,r(),y()),e<l?(this.sY*=-1,e=l,r(),y()):e>l+map.height-h&&(this.sY*=-1,e=l+map.height-h,r(),y())}if(collide(this,()=>{player.events[0].on&&!this.noHit?(constructors.entity.bonus("health",t-5+s/2,e-5+h/2,10,10),r(),this.hp--,this.noHit=!0,setTimeout(()=>{this.noHit=!1},40*Game.tick),this.hp<=0&&(this.del=!0)):player.events[0].on||player.noHit||(r(),player.onHit(this.dmg))}),!this.know[0]&&this.hp>5)switch(this.know[0]=!0,setTimeout(()=>{this.know[0]=!1},300*Game.tick),Math.floor(4*Math.random())){case 0:var c=s/3.5,m=h/3.5,d=()=>2.5+5*Math.random(),p=constructors.entity.enemy,y=(t,e)=>{p("generic",1,g,f,t,e,c,m,1,this.chunkNmb,this.id)};(G=(()=>{g=this.x+c/1.75,f=this.y+m/1.75,y(0,-d()),y(d(),0),y(0,d()),y(-d(),0)}))(),setTimeout(()=>{G()},40*Game.tick);break;case 1:c=s/5,m=h/5;var u=$F[2];p=constructors.entity.projectile,y=(()=>{p("bullet",g,f,u(),u(),c,m,1,this.chunkNmb)});(G=(()=>{g=this.x+c/2.5,f=this.y+m/2.5;for(let t=0;t<50;t++)y()}))(),setTimeout(()=>{G(),setTimeout(()=>{G()},40*Game.tick)},40*Game.tick);break;case 2:var g,f,G;c=s/3,m=h/3,d=(()=>2.5+2.5*Math.random()),p=constructors.entity.projectile,y=((t,e)=>{p("missile",g,f,t,e,c,m,5,this.chunkNmb)});(G=(()=>{g=this.x+c/1.5,f=this.y+m/1.5,y(0,-d()),y(d(),0),y(0,d()),y(-d(),0)}))(),setTimeout(()=>{G()},40*Game.tick);break;case 3:constructors.entity.bonusMove("slow",t+s/4,e+h/4,$F[2](),$F[2](),s/2,h/2,this.chunkNmb,this.id)}else if(this.hp<=5){let i,a,l=s/5,n=h/5,o=$F[2],r=Game.tick,c=constructors.entity.projectile,m=this.chunkNmb,d=()=>{c("bullet",i,a,o(),o(),l,n,1,m)},p=()=>{this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*r)};collide(this,()=>{p(),player.events[0].on&&!this.noHit?(constructors.entity.bonus("health",t-5+s/2,e-5+h/2,10,10),this.hp--,this.noHit=!0,setTimeout(()=>{this.noHit=!1},40*r),this.hp<=0&&(this.del=!0)):player.events[0].on||player.noHit||player.onHit(this.dmg),!this.know[1]&&this.hp>0&&(setTimeout(()=>{i=this.x+s/2.5,a=this.y+h/2.5;for(let t=0;t<200;t++)d();setTimeout(()=>{this.know[1]=!1},20*r)},20*r),this.know[1]=!0)})}this.x=t+this.sX,this.y=e+this.sY}},health:{update:function(){Game.ctx.fillStyle=this.color,Game.ctx.fillRect(map.refX+this.x,map.refY+this.y,this.width,this.height),collide(this,()=>{player.noHit||(this.del=!0,player.health<player.totalHealth&&player.onHit(-1))})}},slowBonus:{update:function(){Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+t,map.refY+e,this.width,this.height),t<s?(this.sX*=-1,t=s):t>s+map.width-this.width&&(this.sX*=-1,t=s+map.width-this.width),e<h?(this.sY*=-1,e=h):e>h+map.height-this.height&&(this.sY*=-1,e=h+map.height-this.height),collide(this,()=>{this.del=!0,player.eventByCall[0]()}),this.parentCheck(),this.x=t+this.sX,this.y=e+this.sY}},emprisonmentParticle:{update:function(){Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+t,map.refY+e,this.width,this.height),t<s?(this.sX*=-1,t=0):t>s+map.width-this.width&&(this.sX*=-1,t=s+map.width-this.width),e<h?(this.sY*=-1,e=0):e>h+map.height-this.height&&(this.sY*=-1,e=h+map.height-this.height),this.x=t+this.sX,this.y=e+this.sY}},explosionParticle:{update:function(){Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+this.x,map.refY+this.y,this.width,this.height),t<s?(this.sX*=-1,t=s):t>s+map.width-this.width&&(this.sX*=-1,t=s+map.width-this.width),e<h?(this.sY*=-1,e=h):e>h+map.height-this.height&&(this.sY*=-1,e=h+map.height-this.height),collide(this,()=>{player.noHit||player.onHit(1)}),this.x=t+this.sX,this.y=e+this.sY}},bullet:{update:function(){this.parentCheck(),Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+t,map.refY+e,this.width,this.height),t<s?this.del=!0:t>s+map.width-this.width&&(this.del=!0),e<h?this.del=!0:e>h+map.height-this.height&&(this.del=!0),collide(this,()=>{player.noHit||(this.del=!0,player.onHit(this.dmg))}),this.x=t+this.sX,this.y=e+this.sY}},missile:{update:function(){Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+t,map.refY+e,this.width,this.height);const a=()=>{let i=t+this.width/2,s=e+this.height/2,h=Game.tick,a=$F[0],l=Math.random,n=()=>{constructors.entity.particle("explosion",i,s,5*a(),5*a(),5+a(),5+a(),160*l()*h,this.chunkNmb)};for(let t=0;t<10;t++)n();this.del=!0};t<s?a():t>s+map.width-this.width&&a(),e<h?a():e>h+map.height-this.height&&a(),collide(this,()=>{player.noHit||(a(),this.del=!0,player.onHit(this.dmg))}),this.x=t+this.sX,this.y=e+this.sY}}},
all:[],idChoose:0},text:{all:[],fontFamily:"Oxanium",fontSize:"15px",update:()=>{const t=$D[1]("additionalText");t.innerHTML="";for(let e=0,i=Game.text.all.length;e<i;e++)t.innerHTML+=`<div style="font-weight: 100 !important;color:${colors.HTML.game.text};font-size:${Game.text.all[e].size};font-family:Oxanium;position:absolute;left:${Game.text.all[e].x+"px"};bottom:${Game.text.all[e].y+"px"}">${Game.text.all[e].content}</div>`}},restart:()=>{Game.stop()},start:t=>{player.currentChunkNumber=0,Game.corridorsVisible=!1,player.color=colors.entities.player,map.update(t),player.chunk=map.all[0],Game.index=t,Game.onEndEvent=0,constructors.mouseEventHover("LifeHover",window.innerWidth-100,window.innerHeight-100,75,75,()=>{$D[1]("healthInformation").style.display="block"},()=>{$D[1]("healthInformation").style=""},function(){this.x=window.innerWidth-100,this.y=window.innerHeight-100}),void 0!==levels.autoGenerated[t].onload&&levels.autoGenerated[t].onload(),void 0!==levels.autoGenerated[t].perTick&&Game.tickEvents.push(levels.autoGenerated[t].perTick),player.x=player.iX,player.y=player.iY,player.health=player.totalHealth,$D[1]("healthFill").style.transform="translateY(-51px)",$D[1]("health").innerHTML=`You have ${player.health} points of health of a total of ${player.totalHealth}.`,Game.entities.all=[];const i=$D[1]("levelSelector");i.style.animation="disappear 1 1s";const s=$D[1]("back");s.style.animation="disappear 1 1s",$D[1]("game").style="animation:appear 1 1s;display:block",Game.resize(),map.contents();for(let t=0,e=Game.entities.all.length;t<e;t++)Game.entities.all[t].update();const h=Game.ctx;h.clearRect(0,0,window.innerWidth,window.innerHeight),h.fillStyle=colors.HTML.game.gridLevel;const a=window.innerWidth/2+Game.cursor.mapX,l=window.innerHeight/2+Game.cursor.mapY;map.x=a,map.y=l;const n=a-player.x-player.width/2,o=l-player.y-player.height/2;map.refX=n,map.refY=o;const r=map.all;h.fillStyle=colors.HTML.game.gridLevel;let c=r.length;for(let t=0;t<c;t++){const e=r[t];h.fillRect(n+e.x,o+e.y,map.width,map.height)}for(let t=0,i=Game.entities.all,s=i.length;t<s;t++)e=i[t],h.fillRect(n+e.x,o+e.y,e.width,e.height);h.fillRect(map.x-player.width/2,map.y-player.height/2,player.width,player.height),Game.text.update(),Game.updateScreen(),setTimeout(()=>{i.style="display:none",s.style="display:none",setTimeout(()=>{intervalStart=setInterval(Game.update,Game.tick),clearInterval(intervalMapUpdate)},200)},900),Game.text.update()}};$D[1]("exitLevel").addEventListener("click",()=>{clearInterval(intervalStart),Game.ticksPassed=0;const t=$D[1]("game");t.style.animation="disappear 1 1s";const e="animation:appear 1 1s;display:block";$D[1]("levelSelector").style=e,$D[1]("back").style=e,Game.text.all=[],Game.tickEvents=[],setTimeout(()=>{t.style="display:none"},900)}),levels.updateMenu(),window.addEventListener("resize",()=>{Game.resize(),Game.update()}),window.addEventListener("keydown",t=>{Game.keys[t.key]=!0}),window.addEventListener("keyup",t=>{Game.keys[t.key]=!1}),window.addEventListener("mousemove",t=>{const e=t.clientX,i=t.clientY;Game.cursor.x=e,Game.cursor.y=i,Game.cursor.mapX=((window.innerWidth+player.width)/2-t.clientX)/7,Game.cursor.mapY=(window.innerHeight+player.height-i)/7;const s=Game.cursor.events.hover.length;if(s>-1){const t=Game.cursor.events.hover;for(var h=0;h<s;h++){const s=t[h];e<=s.x+s.width&&s.x<=e&&i<=s.y+s.height&&s.y<=i?s.active||(s.onEvent(),s.active=!0):s.active&&(s.onStop(),s.active=!1)}}});var addToGeneric=function(){this.parentCheck(),Game.ctx.fillStyle=this.color;let t=this.x,e=this.y,i=this.chunk,s=i.x,h=i.y;Game.ctx.fillRect(map.refX+t,map.refY+e,this.width,this.height),t<s?(this.sX*=-1,t=s):t>s+map.width-this.width&&(this.sX*=-1,t=s+map.width-this.width),e<h?(this.sY*=-1,e=h):e>h+map.height-this.height&&(this.sY*=-1,e=h+map.height-this.height),collide(this,()=>{player.events[0].on&&!this.noHit?this.onHit(1):player.noHit||player.events[0].on||player.onHit(this.dmg)}),this.x=t+this.sX,this.y=e+this.sY};Game.entities.properties.generic_enemy.update=addToGeneric,Game.entities.properties.generic_enemy_nohealth.update=addToGeneric;
const collide=(e,t)=>{player.x<=e.x+e.width&&e.x<=player.x+player.width&&player.y<=e.y+e.height&&e.y<=player.y+player.height&&t()},map={width:void 0,height:void 0,x:void 0,y:void 0,contents:void 0,all:void 0,refX:void 0,refY:void 0,update:function(e){this.contents=levels.autoGenerated[e].contents,this.width=levels.autoGenerated[e].grid.width,this.height=levels.autoGenerated[e].grid.height,this.all=levels.autoGenerated[e].grid.all}},constructors={event:(e,t,i,a,n)=>({name:e,currentCooldown:0,condition:i,key:t,whenHappen:a,whenNo:n,on:!1}),event1:(e,t)=>({name:e,whenHappen:t,on:!1}),mouseEventHover:(e,t,i,a,n,o,s,l)=>{Game.cursor.events.hover.push({id:e,x:t,y:i,width:a,height:n,onEvent:o,onStop:s,onResize:l,active:!1})},text:(e,t,i)=>{Game.text.all.push({font:Game.text.fontFamily,size:Game.text.fontSize,x:e,y:t,content:i})},entity:{enemy:function(e,t,i,a,n,o,s,l,r,p,h){Game.entities.all.push({id:void 0,parentId:h,parentAlive:!1,chunk:map.all[p],chunkNmb:p,know:[!1,!1],hp:t,totalHP:t,type:"enemy",subtype:e,x:i,y:a,sX:n,sY:o,dmg:r,color:colors.entities.enemy.normal,del:!1,noHit:!1,width:s,height:l,parentCheck:Game.entities.properties.parentCheck,onHit:void 0,update:function(){switch(this.id=id.new(),void 0===this.parentId&&(this.parentCheck=(()=>{})),void 0===this.dmg&&(this.dmg=1),this.subtype){case"nohealth":this.onHit=Game.entities.properties.generic_enemy_nohealth.onHit,this.update=Game.entities.properties.generic_enemy_nohealth.update,this.onPlayerCollide=Game.entities.properties.generic_enemy_nohealth.onPlayerCollide;break;case"generic":this.onHit=Game.entities.properties.generic_enemy.onHit,this.update=Game.entities.properties.generic_enemy.update,this.onPlayerCollide=Game.entities.properties.generic_enemy.onPlayerCollide;break;case"boss1":this.onHit=Game.entities.properties.boss1.onHit,this.update=Game.entities.properties.boss1.update;break;case"boss2":this.onHit=Game.entities.properties.boss2.onHit,this.update=Game.entities.properties.boss2.update}}})},bonus:function(e,t,i,a,n,o){Game.entities.all.push({chunk:map.all[o],type:"bonus",subtype:e,x:t,y:i,del:!1,color:colors.entities.bonus.health,width:a,height:n,onHit:()=>{},update:function(){switch(this.subtype){case"health":this.update=Game.entities.properties.health.update}}})},bonusMove:function(e,t,i,a,n,o,s,l,r){Game.entities.all.push({parentId:r,chunk:map.all[l],type:"bonusMove",subtype:e,x:t,y:i,sX:a,sY:n,del:!1,color:colors.entities.bonusMove.slow,width:o,height:s,parentCheck:Game.entities.properties.parentCheck,update:function(){switch(void 0===this.parentId&&(this.parentCheck=(()=>{})),this.subtype){case"slow":this.update=Game.entities.properties.slowBonus.update}}})},particle:function(e,t,i,a,n,o,s,l,r){Game.entities.all.push({chunk:map.all[r],type:"particle",subtype:e,x:t,y:i,sX:a,sY:n,del:!1,width:o,height:s,update:function(){switch(setTimeout(()=>{this.del=!0},l),this.subtype){case"enprisonment":this.color=colors.entities.bonusMove.slow,this.update=Game.entities.properties.emprisonmentParticle.update;break;case"explosion":this.color=colors.entities.projectile.missile,this.update=Game.entities.properties.explosionParticle.update}}})},projectile:function(e,t,i,a,n,o,s,l,r,p){Game.entities.all.push({chunk:map.all[r],chunkNmb:r,parentId:p,id:id.new(),type:"projectile",subtype:e,x:t,y:i,dmg:l,sX:a,sY:n,parentCheck:Game.entities.properties.parentCheck,del:!1,width:o,height:s,update:function(){switch(void 0===this.parentId&&(this.parentCheck=(()=>{})),this.subtype){case"bullet":this.color=colors.entities.projectile.bullet,this.update=Game.entities.properties.bullet.update;break;case"missile":this.color=colors.entities.projectile.missile,this.update=Game.entities.properties.missile.update}}})}}},
know=[],player={health:10,totalHealth:10,currentChunkNumber:0,chunk:void 0,x:0,y:0,iX:0,iY:0,sX:0,sY:0,lX:5,lY:5,nX:.5,nY:.5,lvl:0,exp:0,color:colors.entities.player,width:20,height:20,onHit:e=>{if(!0===valid(e,"function player.onHit")){player.health-=e,$D[1]("health").innerHTML=`You have ${player.health} points of health of a total of ${player.totalHealth}.`,player.noHit=!0,player.health<=0&&Game.restart();let t=-100/player.totalHealth*player.health;const i=$D[1]("healthFill"),a=40*Game.tick,n=$D[1]("healthNew");i.style.transition=a+"ms";const o=$D[1]("healthBackground");o.style.animation="rotate 1 "+a+"ms",n.style.animation=e>0?"damaged 1 "+a+"ms":"healed 1 "+a+"ms",i.style.transform="translateY("+t+"%)",setTimeout(()=>{o.style="",n.style="",player.noHit=!1},a)}},noHit:!1,events:[constructors.event("Dash"," ",()=>0===player.events[0].currentCooldown,()=>{Game.cooldowns.dash.active=!0,player.noHit=!0;const e=player.events[0];e.on=!0,e.currentCooldown=1,player.lX*=3,player.lY*=3,player.nX*=4,player.nY*=4,setTimeout(()=>{e.on=!1,player.lX/=3,player.lY/=3,player.nX/=4,player.nY/=4,setTimeout(()=>{player.noHit=!1,setTimeout(()=>{e.currentCooldown=0},40*Game.tick)},20*Game.tick)},10*Game.tick)},()=>{}),constructors.event("Speed","Shift",()=>0===player.events[1].currentCooldown,()=>{Game.cooldowns.speed.active=!0;const e=player.events[1];e.on=!0,e.currentCooldown=1,player.lX*=2,player.lY*=2,setTimeout(()=>{e.on=!1,player.lX/=2,player.lY/=2,setTimeout(()=>{e.currentCooldown=0},160*Game.tick)},40*Game.tick)},()=>{})],eventByCall:[()=>{player.lX/=5,player.lY/=5,player.nX/=5,player.nY/=5;const e=e=>{(()=>{for(let e=0;e<10;e++)constructors.entity.particle("enprisonment",player.x+$F[1](),player.y+$F[1](),$F[0](),$F[0](),5,5,40*Game.tick,player.currentChunkNumber)})(),setTimeout(e,10*Game.tick)};e(()=>{e(()=>{e(()=>{e(()=>{e(()=>{player.lX*=5,player.lY*=5,player.nX*=5,player.nY*=5},Game.tick)})})})})}],update:function(){Game.ctx.fillStyle=this.color;let e=player.sX,t=player.sY,i=player.lY,a=player.lX,n=Game.keys,o=player.x,s=player.y,l=player.width,r=player.height,p=this.chunk,h=levels.autoGenerated[Game.index].grid.corridor[player.currentChunkNumber];Game.ctx.fillRect(map.x-player.width/2,map.y-player.height/2,l,r),Game.ctx.fillRect(55+o/8/2-l,55+s/8/2-r,l/2,r/2);let y=()=>{e>a?e=a:e<-1*a?e=-1*a:(n.a||n.ArrowLeft||n.A?(e-=player.nX,know[0]=!1):know[0]=!0,n.d||n.ArrowRight||n.D?(e+=player.nX,know[1]=!1):know[1]=!0,n.a&&n.A&&(Game.keys.A=!1,Game.keys.a=!1),n.d&&n.D&&(Game.keys.D=!1,Game.keys.d=!1),know[0]&&know[1]&&(e>0?e-=.1:e<0&&(e+=.1)))},c=()=>{t>i?t=i:t<-1*i?t=-1*i:(n.w||n.ArrowUp||n.W?(t-=player.nY,know[2]=!1):know[2]=!0,n.s||n.ArrowDown||n.S?(t+=player.nY,know[3]=!1):know[3]=!0,n.w&&n.W&&(Game.keys.W=!1,Game.keys.w=!1),n.s&&n.S&&(Game.keys.S=!1,Game.keys.s=!1),know[2]&&know[3]&&(t>0?t-=.1:t<0&&(t+=.1)))};Game.corridorsVisible?o<=h.x+h.width&&h.x<=o+l&&s<=h.y+h.height&&h.y<=s+r?(y(),s<h.y?(t=0,s=h.y):s>h.y+h.height-r?(t=0,s=h.y+h.height-r):c()):o<=h.x+h.width+l+a&&h.x<=o+l&&s<=h.y+h.height&&h.y<=s+r?(Game.corridorsVisible=!1,player.currentChunkNumber++,player.chunk=map.all[player.currentChunkNumber]):(o<p.x+e?(e=0,o=p.x):o>p.x+map.width-l?(e=0,o=p.x+map.width-l):y(),s<p.y+t?(t=0,s=p.y):s>p.y+map.height-r?(t=0,s=p.y+map.height-r):c()):(o<p.x?(e=0,o=p.x):o>p.x+map.width-l?(e=0,o=p.x+map.width-l):y(),s<p.y?(t=0,s=p.y):s>p.y+map.height-r?(t=0,s=p.y+map.height-r):c()),player.sX=e,player.x=o+e,player.sY=t,player.y=s+t}};</script>

</div>
</body>
</html>
