<!DOCTYPE html>
<html>

<head>
    <style id="colorStyle"></style>
    <style>html{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;image-rendering:pixelated}:focus{outline:0}input{border:none;border-radius:0}.full div,.full input,.full span{position:fixed}body,html{margin:0;padding:0;text-align:center;font-family:Oxanium;overflow:hidden;background:var(--game-background)}#back,#customizeButton,#exitLevel,.ball,.levelCircle,.menu_container{cursor:pointer}#customize_menu{cursor:default}#back,#customization,#customize_menu,#customizedLevels,#game,#levelSelector,#selector,#settings{display:none}#game,#game_background,#menu,.full,canvas{position:fixed;left:0;top:0;width:100%;height:100%}#menu{background:var(--menu-background);width:100%;height:100%;color:var(--menu-color);text-shadow:0 1px 2px var(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 1px 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow),0 0 2px VAR(--menu-shadow);font-weight:900}.menu_container{background:var(--menu_container-background);height:175px;width:300px;position:fixed;left:calc(50% - calc(150px + var(--menu_container-borderThickness)));top:calc(50% - calc(97.5px + var(--menu_container-borderThickness)));border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.menu_container h2{width:100%;height:50px;line-height:50px;font-size:20px;margin:0;padding:0}.menu_container h3{width:100%;height:10px;line-height:10px;font-size:16px;margin:0;padding:0}#customization{position:fixed;left:calc(50% - calc(300px + var(--menu_container-borderThickness)));top:100px;border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.menus_customization{display:none;background:var(--menu_container-background);height:350px;width:600px;position:fixed;left:calc(50% - calc(300px + var(--menu_container-borderThickness)));top:100px;border-radius:var(--menu_container-borderRadius);box-shadow:0 5px 10px var(--menu_container-shadow);border:var(--menu_container-borderThickness) var(--menu_container-borderColor) solid}.customization1{width:50%;height:175px;background:var(--menu_container-background-top);border-radius:var(--menu_container-borderRadius) var(--menu_container-borderRadius) 0 0}.customization2{width:50%;height:175px;background:var(--menu_container-background-bottom);border-radius:0 0 var(--menu_container-borderRadius) var(--menu_container-borderRadius)}#customize_menu{height:350px;top:calc(50% - calc(175px + var(--menu_container-borderThickness)))}.switch{left:80px;width:calc(100% - 160px);height:10px;position:absolute;background:#666;border-radius:10px;box-shadow:0 2px 2px #222;border:2px #000 solid}.ball{position:relative;top:-7.5px;width:20px;height:20px;border:2px #000 solid;background:#fff;box-shadow:0 2px 2px #222;border-radius:25%}.ball.inactive{left:-10px;background:#666}.ball.active{left:calc(100% - 20px);background:#38e861}.switch_name{width:100%;text-align:center;font-size:14px;height:20px;line-height:20px;position:absolute;left:0}.selector_option{width:100%;height:175px}.selector_option:first-child{background:var(--menu_container-background-top);border-radius:var(--menu_container-borderRadius)}.selector_option:nth-child(2){background:var(--menu_container-background-bottom);border-radius:0 0 var(--menu_container-borderRadius) var(--menu_container-borderRadius)}.textMiddle{width:100%;height:50px;line-height:0;top:calc(50% - 10px);position:relative;font-size:20px}#levelSelector{background:var(--levelSelector-background);color:var(--levelSelector-text);width:100%;height:100%;left:0;top:0;position:fixed;overflow-x:scroll}#levelSelector::-webkit-scrollbar-thumb{background-color:#6669;box-shadow:0 0 5px #000}#levelSelector::-webkit-scrollbar-thumb:hover{background-color:#5559}#levelSelector::-webkit-scrollbar-thumb:active{background-color:#4449}#levelSelector::-webkit-scrollbar-track{background-color:transparent}#levelSelector::-webkit-scrollbar{width:13px}.levelCircle{width:50px;height:50px;background:var(--levelSelector_circleLevel-background);border-radius:50%;box-shadow:0 2px 5px var(--levelSelector_circleLevel-shadow);line-height:50px;color:var(--levelSelector_circleLevel-color);font-weight:100}#back,#exitLevel{position:fixed;background:var(--backButton-background);border:var(--backButton-borderThickness) var(--backButton-border) solid;border-radius:var(--backButton-borderRadius);box-shadow:var(--backButton-shadow-offsetX) var(--backButton-shadow-offsetY) var(--backButton-shadow-blur) var(--backButton-shadow);color:var(--backButton-text);width:70px;height:30px;font-size:17px;line-height:30px;text-align:center}#back{left:10px;bottom:10px}#exitLevel{right:10px;top:10px}#game_background{background:var(--game-background)}#customizeButton{background:var(--customize-background);position:fixed;left:calc(50% - calc(100px + var(--customize-border-thickness)));width:200px;top:280px;border:var(--customize-border-thickness) var(--customize-border-color) solid;height:30px;line-height:30px;box-shadow:var(--customize-shadow-offsetX) var(--customize-shadow-offsetY) var(--customize-shadow-blur) var(--customize-shadow-color);border-radius:var(--customize-border-radius)}#customizeButton:active{top:285px;box-shadow:none}.consoleError{background:#f55b49;border:2px #752a22 solid;width:150px;height:150px;position:absolute;right:40px;bottom:40px;text-align:left;color:#fff}.consoleError h2{margin:5px 0 0 25px}.consoleError span{margin:2.5px 0 0 20px}.consoleMessage{background:#222;box-shadow:0 3px 4px #000 solid;width:150px;height:150px;position:absolute;right:40px;bottom:40px;text-align:left;color:#fff}.consoleMessage h2{margin:5px 0 0 25px}.consoleMessage span{margin:2.5px 0 0 20px}.cooldownBorder{width:30px;height:30px;border:10px #2e234eaa solid;display:none;margin-top:20px}.cooldownBackground{width:30px;height:30px;background:#3d3067aa;overflow:hidden;position:relative;display:none}.cooldownFill{width:30px;height:100%;background:#fffa;left:0;bottom:0;position:absolute}#cooldowns{top:105px;left:40px;position:absolute;display:grid}.information{position:absolute;width:250px;height:150px;background:#100c1c;display:none;color:var(--game-text);padding:20px;text-align:left;box-shadow:0 5px #0006}.information h2{padding:5px 0 5px 0;margin:0;font-size:20px;line-height:20px}.information div{background-image:linear-gradient(90deg,#aaa,#fff);width:100%;height:1px;margin-bottom:10px}.information p{margin:0;padding:0;font-size:12px}#healthInformation{bottom:115px;right:25px}#healthNew{filter:brightness(1.15);background-image:url(https://raw.githubusercontent.com/Williek11/CubeGame/master/Files/GUI.png);width:75px;height:75px;background-size:100%;position:absolute;right:25px;bottom:25px;box-shadow:0 5px #0006}#healthBackground{width:51px;height:51px;right:37px;bottom:37px;position:absolute;background:#06000d;overflow:hidden}#healthFill{width:51px;height:100%;position:absolute;background:#46d56a;left:0;bottom:-51px}@keyframes disappear{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes appear{from{opacity:0;transform:scale(2)}to{opacity:1;transform:scale(1)}}@keyframes opDisappear{from{opacity:1}to{opacity:0}}@keyframes opAppear{from{opacity:0}to{opacity:1}}@keyframes upDown{0%{transform:translateY(15px)}50%{transform:translateY(-15px)}100%{transform:translateY(15px)}}@keyframes appearGameConsole{from{opacity:0;transform:translateX(200px)}to{opacity:1}}@keyframes disappearGameConsole{from{opacity:1}to{opacity:0;transform:translateX(200px)}}@keyframes damaged{50%{transform:rotate(10deg);box-shadow:0 0 10px #a31111}}@keyframes healed{50%{transform:rotate(10deg);box-shadow:0 0 10px #46d56a}}@keyframes rotate{50%{transform:rotate(10deg)}}*{font-weight:600}</style>
</head>

<body>
    
    <div id="menu">
        <div id="settings">
            <div class="menu_container" id="settings_menu">
                <div onclick="menu.settingsToCustomize()" id="customize" class="selector_option"><span class="textMiddle">Customize</span></div>
            </div>
            <div class="menu_container" id="customize_menu">
                <div class="selector_option" style="border-radius:var(--menu_container-borderRadius) var(--menu_container-borderRadius) 0 0">
                    <h2>Customization</h2>
                    <h3>Color Themeing</h3>
                    <div class="switch" style="top: 85px;"><div class="ball inactive" onclick="themes(0, 0)"></div></div>
                    <div class="switch_name" style="top:110px">Dark Mode</div>
            
                    <div class="switch" style="top: 155px;"><div class="ball inactive" onclick="themes(1, 1)"></div></div>
                    <div class="switch_name" style="top:180px">Black and White Mode</div>
                </div>
                <div class="selector_option"></div>
            </div>
        
        </div>
        <div id="select">
            <h2 style="margin-top:75px">Cube Game</h2>
            <p onclick="menu.selectToSelector()">Start</p>
            <p onclick="menu.selectToSettings()">Settings</p>
        </div>
        <div id="selector">
            <div class="menu_container" id="typeOfLevel">
                <div onclick="menu.selectToLevel()" id="levels" class="selector_option"><span class="textMiddle">Levels</span></div>
            </div>
        </div>
    </div>
    <div id="levelSelector">
        <h2 style="position: fixed;text-align: center;width: 100%;">Levels</h2>
        <div id="theLevels"></div>
    </div>
    <div id="back">Back</div>
    <div id="game">
        <div id="game_background"></div>
        <canvas id="canvas"></canvas>
        <div id="additionalText"></div>
        <div id="exitLevel">Exit</div>
        <div id="game_console"></div>

        <div id="cooldowns">
            <div class="cooldownBorder" id="dashBorder"><div class="cooldownBackground" id="dashBackground"><div class="cooldownFill" id="dashFill"></div></div></div>
            <div class="cooldownBorder" id="speedBorder"><div class="cooldownBackground" id="speedBackground"><div class="cooldownFill" id="speedFill"></div></div></div>
        </div>

        <div id="healthBackground"><div id="healthFill"></div></div><div id="healthNew"></div>

        <div id="healthInformation" class="information">
            <h2>Health</h2>
            <div></div>
            <p id="health"></p>
        </div>
    </div>

    <script>void 0!=localStorage.knowV1&&"undefined"!=localStorage.knowV1||(localStorage.knowV2=void 0,localStorage.knowV1="",void 0==localStorage.active&&(localStorage.active=JSON.stringify([!1,!1,!1])));const $F=[()=>1===Math.round(Math.random())?Math.random():-1*Math.random(),()=>1===Math.round(Math.random())?Math.random()*player.width:Math.random()*player.width*-1,()=>1===Math.round(Math.random())?10*Math.random():10*Math.random()*-1],$Ô=[(e,t,i)=>{for(let o in e)if(e[o][t]===i)return o},(e,t,i)=>{for(let o in e)e[o][t]===i&&e.splice(o,1)}],$Â=[(e,t)=>{for(let i in t)e.push(t[i])},(e,t)=>{let i=e.indexOf(t);i>-1&&e.splice(i,1)},(e,t)=>{for(let i in t){let o=e.indexOf(t[i]);o>-1&&e.splice(o,1)}}],$D=[e=>document.createElement(e),e=>document.getElementById(e),(e,t)=>document.querySelectorAll(e)[t],(e,t)=>document.getElementsByTagName(e)[t],(e,t)=>document.getElementsByClassName(e)[t],(e,t)=>{const i=$D[0]("style");i.id=t,i.innerHTML=e,Í[0].appendChild(i)},e=>{$D[0](e).innerHTML},e=>document.getElementsByClassName(e)],id={count:0,new:()=>(id.count++,id.count),reduce:()=>{id.count--}},valid=(e,t)=>{if(null==e||isNaN(e)||e==1/0){let i;null==e?i="null or undefined":isNaN(e)?i="Not a Number (NaN)":e==1/0&&(i="Infinity"),console.error("[Debug]: Value of "+e+" is equal to "+i+" on "+t+". Happened at "+new Date+".")}else if(0!=e)return!0};let active=JSON.parse(localStorage.active);const colorStyle=document.getElementById("colorStyle"),colors={default:()=>{const e=()=>colors.HTML,t=()=>e().menu,i=()=>t().container,o=()=>e().levelSelector,s=()=>o().circleLevel,n=()=>e().backButton,a=()=>i().customize,l=()=>colors.entities;t().background="#aaa",t().color="#fff",t().textShadow="#000",i().background="#ccc",i().background_top="#ddd",i().background_bottom="#ccc",i().shadow="#666",i().borderColor="#0009",i().borderRadius="20px",i().borderThickness="1px",o().background="#222",o().text="#fff",s().background="#aaa",s().shadow="#000",s().color="#000",n().background="#111",n().text="#fff",n().border="#000",n().borderRadius="5px",n().borderThickness="1px",n().shadow="#000",n().shadowOffsetY="2px",n().shadowOffsetX="0",n().shadowBlur="5px",e().game.background="#0c0915",e().game.text="#fff",e().game.gridLevel="#010103",a().background="#888888",a().borderRadius="5px",a().borderColor="#333333",a().borderThickness="2px",a().shadowOffsetX="0",a().shadowOffsetY="2px",a().shadowBlur="2px",a().shadowColor="#000",l().player.normal="#00FF00",l().player.invulnerable="#00AA00",l().enemy.normal="#FF0000",l().enemy.hit="#AA0000",l().enemy.highLight="770000",l().bonus.health="#FFFF00",l().bonusMove.slow="#ffffff",l().projectile.bullet="#FF00FF",l().projectile.missile="#FF881C"},HTML:{menu:{container:{customize:{}}},levelSelector:{circleLevel:{}},backButton:{},game:{}},entities:{player:{},enemy:{},bonus:{},bonusMove:{},projectile:{}},updateHTML:function(){colorStyle.innerHTML=`:root {\n            --menu-background:${colors.HTML.menu.background};\n            --menu-color:${colors.HTML.menu.color};\n            --menu-shadow:${colors.HTML.menu.textShadow};\n            --menu_container-background-top:${colors.HTML.menu.container.background_top};\n            --menu_container-background-bottom: ${colors.HTML.menu.container.background_bottom};\n            --menu_container-shadow: ${colors.HTML.menu.container.shadow};\n            --menu_container-background: ${colors.HTML.menu.container.background};\n            --menu_container-borderColor: ${colors.HTML.menu.container.borderColor};\n            --menu_container-borderRadius: ${colors.HTML.menu.container.borderRadius};\n            --menu_container-borderThickness: ${colors.HTML.menu.container.borderThickness};\n\n            --customize-background: ${colors.HTML.menu.container.customize.background};\n            --customize-border-color: ${colors.HTML.menu.container.customize.borderColor};\n            --customize-border-radius: ${colors.HTML.menu.container.customize.borderRadius};\n            --customize-border-thickness: ${colors.HTML.menu.container.customize.borderThickness};\n            --customize-shadow-color: ${colors.HTML.menu.container.customize.shadowColor};\n            --customize-shadow-offsetY: ${colors.HTML.menu.container.customize.shadowOffsetY};\n            --customize-shadow-offsetX: ${colors.HTML.menu.container.customize.shadowOffsetX};\n            --customize-shadow-blur: ${colors.HTML.menu.container.customize.shadowBlur};\n\n            --levelSelector-background: ${colors.HTML.levelSelector.background};\n            --levelSelector-text: ${colors.HTML.levelSelector.text};\n            --levelSelector_circleLevel-background: ${colors.HTML.levelSelector.circleLevel.background};\n            --levelSelector_circleLevel-shadow: ${colors.HTML.levelSelector.circleLevel.shadow};\n            --levelSelector_circleLevel-color: ${colors.HTML.levelSelector.circleLevel.color};\n\n            --backButton-background: ${colors.HTML.backButton.background};\n            --backButton-text: ${colors.HTML.backButton.text};\n            --backButton-border: ${colors.HTML.backButton.border};\n            --backButton-borderRadius: ${colors.HTML.backButton.borderRadius};\n            --backButton-borderThickness: ${colors.HTML.backButton.borderThickness};\n            --backButton-shadow: ${colors.HTML.backButton.shadow};\n            --backButton-shadow-offsetY: ${colors.HTML.backButton.shadowOffsetY};\n            --backButton-shadow-offsetX: ${colors.HTML.backButton.shadowOffsetX};\n            --backButton-shadow-blur: ${colors.HTML.backButton.shadowBlur};\n\n            --game-background: ${colors.HTML.game.background};\n            --game-text: ${colors.HTML.game.text};\n        }`}},colorsFunc=[()=>{const e=()=>colors.HTML,t=()=>e().menu,i=()=>t().container,o=()=>i().customize;active=[!0,!1,!1],localStorage.active=JSON.stringify(active),t().background="#1a1a1a",i().background="#000",i().background_top="#141414",i().background_bottom="#0e0e0e",i().shadow="#000",i().borderThickness="1px",(()=>e().levelSelector)().background="#111",e().game.text="#fff",o().background="#050505",o().borderRadius="3px",o().borderColor="#000",o().borderThickness="2px",o().shadowOffsetX="0",o().shadowOffsetY="2px",o().shadowBlur="2px",o().shadowColor="#000",colors.entities.enemy.highLight="#770000",colors.entities.bonusMove.slow="#ffffff"},()=>{active=[!1,!0,!1],localStorage.active=JSON.stringify(active);const e=()=>colors.entities;(()=>colors.HTML)().game.text="#fff",e().bonus.health="#707070",e().bonusMove.slow="#FFFFFF",e().enemy.hit="#808080",e().enemy.normal="#a3a3a3",e().enemy.highLight="#5a5a5a",e().projectile.bullet="#dfdfdf",e().projectile.missile="#4d4d4d",e().player="#FFFFFF"}],activated=()=>{colors.default();if(0==(()=>{for(var e=!1,t=0;t<active.length;t++)if(active[t]){e=!0;break}return e})())colors.updateHTML();else for(var e=0,t=active.length;e<t;e++){const t=document.getElementsByClassName("switch")[e],i=document.getElementsByClassName("ball")[e];if(!0===active[e])switch(t.style.background="#38e861",i.className="ball active",colors.updateHTML(),updateLS=(()=>{localStorage.active=JSON.stringify(active)}),e){case 0:colorsFunc[0](),colors.updateHTML();break;case 1:colorsFunc[1](),colors.updateHTML();break;case 2:active=[!1,!1,!0],updateLS()}}},themes=(e,t)=>{const o=document.getElementsByClassName("switch")[e],s=document.getElementsByClassName("ball")[e];if("ball inactive"===s.className){for(o.style.background="#38e861",s.className="ball active",updateLS=(()=>{localStorage.active=JSON.stringify(active)}),i=0,l=document.getElementsByClassName("ball").length;i<l;i++)if("ball active"===document.getElementsByClassName("ball")[i].className&&i!=e){document.getElementsByClassName("switch")[i].style.background="#666",document.getElementsByClassName("ball")[i].className="ball inactive";break}switch(colors.default(),colors.updateHTML(),t){case 0:colorsFunc[0](),colors.updateHTML();break;case 1:colorsFunc[1](),colors.updateHTML();break;case 2:active=[!1,!1,!0],updateLS()}}else active[t]=!1,localStorage.active=JSON.stringify(active),o.style.background="#666",s.className="ball inactive",colors.default(),colors.updateHTML()};activated();const menu={back:{selectToSelector:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.style="display:none",$D[1]("selector").style.display="none",$D[1]("select").style.display="block"},selectToLevel:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToLevel),e.addEventListener("click",menu.back.selectToSelector),$D[1]("menu").style.display="block",$D[1]("selector").style.display="block",$D[1]("levelSelector").style="display:none"},typeOfLevelToCustomizedLevels:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.typeOfLevelToCustomizedLevels),e.addEventListener("click",menu.back.selectToSelector),$D[1]("typeOfLevel").style="display:block",$D[1]("customizedLevels").style="display:none"},selectToSettings:()=>{const e=$D[1]("back");e.style="display:none",e.removeEventListener("click",menu.back.selectToSettings),$D[1]("select").style.display="block",$D[1]("settings").style.display="none"},settingsToCustomize:()=>{const e=$D[1]("back");e.addEventListener("click",menu.back.selectToSettings),e.removeEventListener("click",menu.back.settingsToCustomize),$D[1]("settings_menu").style="display:block",$D[1]("customize_menu").style="display:none"}},selectToSelector:()=>{const e=$D[1]("back");e.style="display:block",e.addEventListener("click",menu.back.selectToSelector),$D[1]("select").style.display="none",$D[1]("selector").style.display="block"},typeOfLevelToCustomizedLevels:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.addEventListener("click",menu.back.typeOfLevelToCustomizedLevels),$D[1]("typeOfLevel").style="display:none",$D[1]("customizedLevels").style="display:block"},selectToLevel:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSelector),e.addEventListener("click",menu.back.selectToLevel),$D[1]("menu").style.display="none",$D[1]("selector").style.display="none",$D[1]("levelSelector").style="display:block"},levels:()=>{$D[1]("levels").style="display:block;animation:appear 1 750ms"},selectToSettings:()=>{const e=$D[1]("back");e.style="display:block",e.addEventListener("click",menu.back.selectToSettings),$D[1]("select").style.display="none",$D[1]("settings").style.display="block"},settingsToCustomize:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.selectToSettings),e.addEventListener("click",menu.back.settingsToCustomize),$D[1]("settings_menu").style="display:none",$D[1]("customize_menu").style="display:block"},customizeToCustomizeMenu:()=>{const e=$D[1]("back");e.removeEventListener("click",menu.back.settingsToCustomize),e.addEventListener("click",menu.back.customizeToCustomizeMenu),$D[1]("customize_menu").style="display:none",$D[1]("customization").style="display:block"}},knowLevel=[!0],levels={autoGenerated:[{name:"1",contents:()=>{const e=e=>{constructors.entity.enemy("nohealth",1,400-e,390,0,0,20,20,0,0)};e(10),e(210),e(-190);const t=(e,t)=>{constructors.text(30,e,t)};t(75,"Let me introduce you to the basics:"),t(60,"The most important principle is: when pressing shift, you can kill enemies and go faster."),t(45,"Also, you can go faster pressing Shift. Anyway, when you kill all enemies in a level, you procced to the next.")},onload:()=>{player.iX=390,player.iY=300},onend:[()=>{Game.corridorsVisible=!0;const e=e=>{constructors.entity.enemy("generic",1,1700-e,390,0,0,20,20,0,1)};e(10),e(110),e(-90),e(210),e(-190);const t=(e,t)=>{constructors.text(30,e,t)};Game.text.all=[],t(60,"Now, be introduced to enemies dropping health. 1/5 of the time they drop health, 4/5 of the time, nope!"),t(45,"Try it with those dummies. Also, an interesting note is that you can pick the bonus even with full HP."),Game.text.update()},()=>{Game.corridorsVisible=!0;const e=constructors.entity.enemy,t=(t,i)=>{e("nohealth",1,3e3-t,390,0,0,20,20,i,2)};t(10,2),t(160,1),t(-150,3);const i=(e,t)=>{constructors.text(30,e,t)};Game.text.all=[],i(75,"And now, the last concept you should be familiarized with (for now), damage!"),i(60,"Enemies can do different damage. Try it with these dummies!"),i(45,"Also, don't be scared. You regenerate!"),Game.text.update(),Game.tickEvents.push(()=>{player.health<10&&knowLevel[0]&&(knowLevel[0]=!1,setTimeout(()=>{player.onHit(-1),knowLevel[0]=!0},40*Game.tick))})},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"2",contents:()=>{const e=constructors.entity.enemy,t=t=>{e("generic",1,400-t,390,5,5,20,20,1,0)};t(10),t(210),t(-190)},onload:()=>{player.iX=390,player.iY=300},onend:[()=>{Game.corridorsVisible=!0;let e=360;const t=constructors.entity.enemy,i=i=>{t("generic",1,1700-i,e,5,5,20,20,1,1)};i(10),i(110),i(-90),i(210),i(-190),e=420,i(10),i(110),i(-90),i(210),i(-190)},()=>{Game.corridorsVisible=!0;const e=Math.random,t=Math.round,i=constructors.entity.enemy,o=()=>0===t(e())?10*e():10*-e();for(var s=0;s<10;s++)i("generic",1,2990,390,o(),o(),20,20,1,2)},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"3",contents:()=>{let e=390;constructors.text(30,45,"Oh, hey, those are little bullet things! They stop after hitting a wall or hitting you!");const t=constructors.entity.projectile,i=i=>{t("bullet",400-i,e,1,1,20,20,1,0)};i(10),i(110),i(-90),e=490,i(10),i(110),i(-90),e=290,i(10),i(110),i(-90)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,i=i=>{t("generic",1,1700-i,e,5,5,20,20,1,1)};i(10),i(110),i(-90),e=490,i(10),i(110),i(-90),e=290,i(10),i(110),i(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%100==0){const o=constructors.entity.projectile,s=Math.random,n=Math.round,a=()=>1===n(s())?10*s():10*-s();for(var e=0,t=Game.entities.all,i=t.length;e<i;e++)"enemy"===t[e].type&&o("bullet",t[e].x,t[e].y,a(),a(),20,20,1,t[e].chunkNmb)}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,i=()=>0===e(t())?10*t():10*-t(),o=constructors.entity.enemy,s=()=>{o("generic",1,2990,390,i(),i(),20,20,1,2)};s(),s(),s(),s(),s(),s(),s(),s(),s(),s()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"4",contents:()=>{let e=390;const t=constructors.entity.projectile;constructors.text(30,45,"Those are missile things! They go boom when hitting something!");const i=i=>{t("missile",400-i,e,1,1,20,20,1,0)};i(10),i(110),i(-90),e=490,i(10),i(110),i(-90),e=290,i(10),i(110),i(-90)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,i=i=>{t("generic",1,1700-i,e,5,5,20,20,1,1)};i(10),i(110),i(-90),e=490,i(10),i(110),i(-90),e=290,i(10),i(110),i(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%250==0){const o=constructors.entity.projectile,s=Math.random,n=Math.round,a=()=>1===n(s())?10*s():10*-s();for(var e=0,t=Game.entities.all,i=t.length;e<i;e++)"enemy"===t[e].type&&o("missile",t[e].x,t[e].y,a(),a(),20,20,1,t[e].chunkNmb)}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,i=()=>0===e(t())?10*t():10*-t(),o=constructors.entity.enemy,s=()=>{o("generic",1,2980,390,i(),i(),20,20,1,2)};s(),s(),s(),s(),s(),s(),s(),s(),s(),s()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"5",contents:()=>{const e=constructors.entity.bonusMove;constructors.text(30,45,"Oh, those are little slowing cubes- you should not touch'em. Well, I mean, you have to now...");(t=>{e("slow",400-t,390,1,1,20,20,0,void 0)})(10)},onload:()=>{player.iX=390,player.iY=100},onend:[()=>{Game.text.all=[],Game.text.update(),Game.corridorsVisible=!0;let e=390;const t=constructors.entity.enemy,i=i=>{t("generic",1,1700-i,e,5,5,20,20,1,1)};i(10),i(110),i(-90),e=490,i(10),i(110),i(-90),e=290,i(10),i(110),i(-90),Game.tickEvents.push(()=>{if(Game.ticksPassed%150==0){const o=constructors.entity.bonusMove,s=Math.random,n=Math.round,a=()=>1===n(s())?10*s():10*-s();for(var e=0,t=Game.entities.all,i=t.length;e<i;e++)if("enemy"===t[e].type){o("slow",t[e].x,t[e].y,a(),a(),20,20,t[e].chunkNmb,t[e].id);break}}})},()=>{Game.corridorsVisible=!0;const e=Math.round,t=Math.random,i=()=>0===e(t())?10*t():10*-t(),o=constructors.entity.enemy,s=()=>{o("generic",1,2990,390,i(),i(),20,20,1,2)};s(),s(),s(),s(),s(),s(),s(),s(),s(),s()},()=>{Game.stop()}],grid:{width:800,height:800,corridor:[{x:800,y:375,width:500,height:50},{x:2100,y:375,width:500,height:50}],all:[{x:0,y:0},{x:1300,y:0},{x:2600,y:0}]}},{name:"B",contents:()=>{constructors.entity.enemy("boss1",15,725,400,5,5,50,50,2,0)},onload:()=>{player.iX=740,player.iY=200},onend:[()=>{Game.stop()}],grid:{width:1500,height:800,corridor:[,],all:[{x:0,y:0}]}}],updateMenu:()=>{const e=$D[1]("theLevels");e.innerHTML="";let t,i=0,o=levels.autoGenerated.length;const s=Math.random,n=i=>{var o=document.createElement("div"),n=3+7*s();let a=100+150*i;t=150*i+200,o.style="position:absolute;left:"+a+"px;top:"+(()=>125+300*s())()+"px;",o.addEventListener("click",()=>{Game.start(i)}),o.innerHTML='<div class="levelCircle" style="animation:upDown infinite '+n+'s">'+levels.autoGenerated[i].name+"</div>",e.appendChild(o)};let a=document.createElement("div");for(;i<o;i++)n(i);a.style="width:"+t+"px;height:0.1px",e.appendChild(a)}};let intervalStart,intervalMapUpdate;const Game={load:e=>{var t=document.createElement("script");t.setAttribute("src",e),document.head.appendChild(t),console.log("Loaded")},eventsInterpretor:e=>{const t=player.events[e];Game.keys[t.key]&&(!0===t.condition()?t.whenHappen():t.whenNo())},cursor:{x:0,y:0,mapX:0,mapY:0,events:{hover:[],click:[]}},corridorsVisible:!1,onEndEvent:0,ticksPassed:0,sure:!0,keys:{},canvas:$D[1]("canvas"),ctx:$D[1]("canvas").getContext("2d"),tick:20,tickEvents:[],debugAccess:!1,cooldowns:{dash:{active:!1,decrease:100/70,currentHeight:100,update:function(){const e=this.currentHeight-this.decrease;this.currentHeight=e,document.getElementById("dashFill").style.height=e+"%",e<0&&(this.currentHeight=100,this.active=!1,document.getElementById("dashBorder").style="",document.getElementById("dashBackground").style="")}},speed:{active:!1,decrease:.5,currentHeight:100,update:function(){const e=this.currentHeight-this.decrease;this.currentHeight=e,document.getElementById("speedFill").style.height=e+"%",e<0&&(this.currentHeight=100,this.active=!1,document.getElementById("speedBackground").style="",document.getElementById("speedBorder").style="")}}},stop:()=>{clearInterval(intervalStart),Game.index=void 0,Game.cursor.events.hover=[],Game.ticksPassed=0;const e=$D[1]("game");e.style.animation="disappear 1 1s";const t="animation:appear 1 1s;display:block";$D[1]("levelSelector").style=t,$D[1]("back").style=t,Game.text.all=[],Game.tickEvents=[],player.sX=0,player.sY=0,setTimeout(()=>{e.style="display:none"},900)},resize:()=>{Game.canvas.width=window.innerWidth,Game.canvas.height=window.innerHeight;const e=Game.cursor.events.hover.length;if(e>-1){const i=Game.cursor.events.hover;for(var t=0;t<e;t++)i[t].onResize()}},updateScreen:()=>{intervalMapUpdate=setInterval(()=>{const e=Game.ctx;e.clearRect(0,0,window.innerWidth,window.innerHeight),e.fillStyle=colors.HTML.game.gridLevel;const t=window.innerWidth/2+Game.cursor.mapX,i=window.innerHeight/2+Game.cursor.mapY;map.x=t,map.y=i;const o=t-player.x-player.width/2,s=i-player.y-player.height/2;map.refX=o,map.refY=s,e.fillRect(o,s,map.width,map.height);let n=levels.autoGenerated[Game.index].grid.all;for(let t=0,i=n.length;t<i;t++){let i=n[t];e.fillRect(o+i.x,s+i.y,map.width,map.height)}for(var a=0,l=Game.entities.all.length;a<l;a++)e.fillStyle=Game.entities.all[a].color,e.fillRect(o+Game.entities.all[a].x,s+Game.entities.all[a].y,Game.entities.all[a].width,Game.entities.all[a].height);e.fillStyle=player.color,e.fillRect(map.x-player.width/2,map.y-player.height/2,player.width,player.height)},Game.tick)},update:()=>{if(Game.entities.all.length>0){for(let e=Game.entities.all,t=e.length-1;t>=0;t--)e[t].del&&e.splice(t,1);for(let e=0,t=Game.tickEvents,i=t.length;e<i;e++)t[e]();for(let e=0,t=player.events.length;e<t;e++)Game.eventsInterpretor(e);Game.ticksPassed++,Game.cooldowns.dash.active&&Game.cooldowns.dash.update(),Game.cooldowns.speed.active&&Game.cooldowns.speed.update();const e=Game.ctx,t=window.innerWidth,i=window.innerHeight;e.clearRect(0,0,t,i);const o=t/2+Game.cursor.mapX,s=i/2+Game.cursor.mapY;map.x=o,map.y=s;const n=o-player.x-player.width/2,a=s-player.y-player.height/2;map.refX=n,map.refY=a;const l=map.all,r=l.length;e.fillStyle=colors.HTML.game.gridLevel;for(let t=0;t<r;t++){const i=l[t];e.fillRect(n+i.x,a+i.y,map.width,map.height)}for(let e=0,t=Game.entities.all,i=t.length;e<i;e++)t[e].update();e.fillStyle="#2e234eaa";const c=40,h=16;for(let t=0;t<r;t++){const i=l[t];e.fillRect(c+i.x/h,c+i.y/h,map.width/h,map.height/h)}if(Game.corridorsVisible){e.fillStyle=colors.HTML.game.gridLevel;let t=levels.autoGenerated[Game.index].grid.corridor[player.currentChunkNumber];const i=t.x,o=t.y,s=t.width,l=t.height;e.fillRect(n+i,a+o,s,l),e.fillStyle="#2e234eaa",e.fillRect(c+i/h,c+o/h-player.height/4,s/h,l/(h/4))}player.update()}else void 0!=Game.index&&(levels.autoGenerated[Game.index].onend[Game.onEndEvent](),Game.onEndEvent++)},entities:{properties:{parentCheck:function(){parentAlive=!1;for(var e=0,t=Game.entities.all,i=t.length;e<i;e++)if(t[e].id===this.parentId){parentAlive=!0;break}!1===parentAlive&&(this.del=!0)},generic_enemy:{update:void 0,onHit:function(e){!0===valid(e,"function generic_enemy.onHit")&&(this.hp-=e,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0,1===Math.floor(5*Math.random())&&constructors.entity.bonus("health",this.x,this.y,this.width,this.height,this.chunkNmb)),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))}},generic_enemy_nohealth:{update:void 0,onHit:function(e){!0===valid(e,"function generic_enemy_nohealth.onHit")&&(this.hp-=e,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))}},boss1:{onHit:function(e){!0===valid(e,"function generic_enemy.onHit")&&(this.hp-=e,this.noHit=!0,tick=Game.tick,setTimeout(()=>{this.noHit=!1},40*tick),this.hp<=0&&(this.del=!0,1===Math.floor(5*Math.random())&&constructors.entity.bonus("health",this.x,this.y,this.width,this.height,this.chunkNmb)),this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*tick))},update:function(){Game.ctx.fillStyle=this.color;var e=this.x,t=this.y,i=this.chunk,o=this.width,s=this.height,n=i.x,a=i.y;const l=map.refX+e,r=map.refY+t;Game.ctx.fillRect(l,r,o,s),Game.ctx.fillRect(l-o/2,r-20,2*o/this.totalHP*this.hp,10);var c=()=>{this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*Game.tick)};if(this.hp>5)e<n?(this.sX*=-1,e=n,c()):e>n+map.width-o&&(this.sX*=-1,e=n+map.width-o,c()),t<a?(this.sY*=-1,t=a,c()):t>a+map.height-s&&(this.sY*=-1,t=a+map.height-s,c());else{let i,l,r=$F[2],h=o/5,d=s/5,m=this.chunkNmb,p=()=>{constructors.entity.projectile("bullet",i,l,r(),r(),h,d,1,m)},u=()=>{i=this.x+o/2.5,l=this.y+s/2.5;for(let e=0;e<25;e++)p()};e<n?(this.sX*=-1,e=n,c(),u()):e>n+map.width-o&&(this.sX*=-1,e=n+map.width-o,c(),u()),t<a?(this.sY*=-1,t=a,c(),u()):t>a+map.height-s&&(this.sY*=-1,t=a+map.height-s,c(),u())}if(collide(this,()=>{player.events[0].on&&!this.noHit?(constructors.entity.bonus("health",e-5+o/2,t-5+s/2,10,10),c(),this.hp--,this.noHit=!0,setTimeout(()=>{this.noHit=!1},40*Game.tick),this.hp<=0&&(this.del=!0)):player.events[0].on||player.noHit||(c(),player.onHit(this.dmg))}),!this.know[0]&&this.hp>5)switch(this.know[0]=!0,setTimeout(()=>{this.know[0]=!1},300*Game.tick),Math.floor(4*Math.random())){case 0:var h=o/3.5,d=s/3.5,m=()=>2.5+5*Math.random(),p=constructors.entity.enemy,u=(e,t)=>{p("generic",1,g,k,e,t,h,d,1,this.chunkNmb,this.id)};(v=(()=>{g=this.x+h/1.75,k=this.y+d/1.75,u(0,-m()),u(m(),0),u(0,m()),u(-m(),0)}))(),setTimeout(()=>{v()},40*Game.tick);break;case 1:h=o/5,d=s/5;var y=$F[2];p=constructors.entity.projectile,u=(()=>{p("bullet",g,k,y(),y(),h,d,1,this.chunkNmb)});(v=(()=>{g=this.x+h/2.5,k=this.y+d/2.5;for(let e=0;e<50;e++)u()}))(),setTimeout(()=>{v(),setTimeout(()=>{v()},40*Game.tick)},40*Game.tick);break;case 2:var g,k,v;h=o/3,d=s/3,m=(()=>2.5+2.5*Math.random()),p=constructors.entity.projectile,u=((e,t)=>{p("missile",g,k,e,t,h,d,5,this.chunkNmb)});(v=(()=>{g=this.x+h/1.5,k=this.y+d/1.5,u(0,-m()),u(m(),0),u(0,m()),u(-m(),0)}))(),setTimeout(()=>{v()},40*Game.tick);break;case 3:constructors.entity.bonusMove("slow",e+o/4,t+s/4,$F[2](),$F[2](),o/2,s/2,this.chunkNmb,this.id)}else if(this.hp<=5){let i,n,a=o/5,l=s/5,r=$F[2],c=Game.tick,h=constructors.entity.projectile,d=this.chunkNmb,m=()=>{h("bullet",i,n,r(),r(),a,l,1,d)},p=()=>{this.color=colors.entities.enemy.hit,setTimeout(()=>{this.color=colors.entities.enemy.normal},5*c)};collide(this,()=>{p(),player.events[0].on&&!this.noHit?(constructors.entity.bonus("health",e-5+o/2,t-5+s/2,10,10),this.hp--,this.noHit=!0,setTimeout(()=>{this.noHit=!1},40*c),this.hp<=0&&(this.del=!0)):player.events[0].on||player.noHit||player.onHit(this.dmg),!this.know[1]&&this.hp>0&&(setTimeout(()=>{i=this.x+o/2.5,n=this.y+s/2.5;for(let e=0;e<200;e++)m();setTimeout(()=>{this.know[1]=!1},20*c)},20*c),this.know[1]=!0)})}this.x=e+this.sX,this.y=t+this.sY}},health:{update:function(){Game.ctx.fillStyle=this.color,Game.ctx.fillRect(map.refX+this.x,map.refY+this.y,this.width,this.height),collide(this,()=>{player.noHit||(this.del=!0,player.health<player.totalHealth&&player.onHit(-1))})}},slowBonus:{update:function(){Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+e,map.refY+t,this.width,this.height),e<o?(this.sX*=-1,e=o):e>o+map.width-this.width&&(this.sX*=-1,e=o+map.width-this.width),t<s?(this.sY*=-1,t=s):t>s+map.height-this.height&&(this.sY*=-1,t=s+map.height-this.height),collide(this,()=>{this.del=!0,player.eventByCall[0]()}),this.parentCheck(),this.x=e+this.sX,this.y=t+this.sY}},emprisonmentParticle:{update:function(){Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+e,map.refY+t,this.width,this.height),e<o?(this.sX*=-1,e=0):e>o+map.width-this.width&&(this.sX*=-1,e=o+map.width-this.width),t<s?(this.sY*=-1,t=0):t>s+map.height-this.height&&(this.sY*=-1,t=s+map.height-this.height),this.x=e+this.sX,this.y=t+this.sY}},explosionParticle:{update:function(){Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+this.x,map.refY+this.y,this.width,this.height),e<o?(this.sX*=-1,e=o):e>o+map.width-this.width&&(this.sX*=-1,e=o+map.width-this.width),t<s?(this.sY*=-1,t=s):t>s+map.height-this.height&&(this.sY*=-1,t=s+map.height-this.height),collide(this,()=>{player.noHit||player.onHit(1)}),this.x=e+this.sX,this.y=t+this.sY}},bullet:{update:function(){this.parentCheck(),Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+e,map.refY+t,this.width,this.height),e<o?this.del=!0:e>o+map.width-this.width&&(this.del=!0),t<s?this.del=!0:t>s+map.height-this.height&&(this.del=!0),collide(this,()=>{player.noHit||(this.del=!0,player.onHit(this.dmg))}),this.x=e+this.sX,this.y=t+this.sY}},missile:{update:function(){Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+e,map.refY+t,this.width,this.height);const n=()=>{let i=e+this.width/2,o=t+this.height/2,s=Game.tick,n=$F[0],a=Math.random,l=()=>{constructors.entity.particle("explosion",i,o,5*n(),5*n(),5+n(),5+n(),160*a()*s,this.chunkNmb)};for(let e=0;e<10;e++)l();this.del=!0};e<o?n():e>o+map.width-this.width&&n(),t<s?n():t>s+map.height-this.height&&n(),collide(this,()=>{player.noHit||(n(),this.del=!0,player.onHit(this.dmg))}),this.x=e+this.sX,this.y=t+this.sY}}},all:[],idChoose:0},text:{all:[],fontFamily:"Oxanium",fontSize:"15px",update:()=>{const e=$D[1]("additionalText");e.innerHTML="";for(let t=0,i=Game.text.all.length;t<i;t++)e.innerHTML+=`<div style="font-weight: 100 !important;color:${colors.HTML.game.text};font-size:${Game.text.all[t].size};font-family:Oxanium;position:absolute;left:${Game.text.all[t].x+"px"};bottom:${Game.text.all[t].y+"px"}">${Game.text.all[t].content}</div>`}},restart:()=>{Game.stop()},start:t=>{player.currentChunkNumber=0,Game.corridorsVisible=!1,player.color=colors.entities.player.normal,map.update(t),player.chunk=map.all[0],Game.index=t,Game.onEndEvent=0,constructors.mouseEventHover("LifeHover",window.innerWidth-100,window.innerHeight-100,75,75,()=>{$D[1]("healthInformation").style.display="block"},()=>{$D[1]("healthInformation").style=""},function(){this.x=window.innerWidth-100,this.y=window.innerHeight-100}),void 0!==levels.autoGenerated[t].onload&&levels.autoGenerated[t].onload(),void 0!==levels.autoGenerated[t].perTick&&Game.tickEvents.push(levels.autoGenerated[t].perTick),player.x=player.iX,player.y=player.iY,player.health=player.totalHealth,$D[1]("healthFill").style.transform="translateY(-51px)",$D[1]("health").innerHTML=`You have ${player.health} points of health of a total of ${player.totalHealth}.`,Game.entities.all=[];const i=$D[1]("levelSelector");i.style.animation="disappear 1 1s";const o=$D[1]("back");o.style.animation="disappear 1 1s",$D[1]("game").style="animation:appear 1 1s;display:block",Game.resize(),map.contents();for(let e=0,t=Game.entities.all.length;e<t;e++)Game.entities.all[e].update();const s=Game.ctx;s.clearRect(0,0,window.innerWidth,window.innerHeight),s.fillStyle=colors.HTML.game.gridLevel;const n=window.innerWidth/2+Game.cursor.mapX,a=window.innerHeight/2+Game.cursor.mapY;map.x=n,map.y=a;const l=n-player.x-player.width/2,r=a-player.y-player.height/2;map.refX=l,map.refY=r;const c=map.all;s.fillStyle=colors.HTML.game.gridLevel;let h=c.length;for(let e=0;e<h;e++){const t=c[e];s.fillRect(l+t.x,r+t.y,map.width,map.height)}for(let t=0,i=Game.entities.all,o=i.length;t<o;t++)e=i[t],s.fillRect(l+e.x,r+e.y,e.width,e.height);s.fillRect(map.x-player.width/2,map.y-player.height/2,player.width,player.height),Game.text.update(),Game.updateScreen(),setTimeout(()=>{i.style="display:none",o.style="display:none",setTimeout(()=>{intervalStart=setInterval(Game.update,Game.tick),clearInterval(intervalMapUpdate)},200)},900),Game.text.update()}};$D[1]("exitLevel").addEventListener("click",()=>{clearInterval(intervalStart),Game.ticksPassed=0;const e=$D[1]("game");e.style.animation="disappear 1 1s";const t="animation:appear 1 1s;display:block";$D[1]("levelSelector").style=t,$D[1]("back").style=t,Game.text.all=[],Game.tickEvents=[],setTimeout(()=>{e.style="display:none"},900)}),levels.updateMenu(),window.addEventListener("resize",()=>{Game.resize(),Game.update()}),window.addEventListener("keydown",e=>{Game.keys[e.key]=!0}),window.addEventListener("keyup",e=>{Game.keys[e.key]=!1}),window.addEventListener("mousemove",e=>{const t=e.clientX,i=e.clientY;Game.cursor.x=t,Game.cursor.y=i,Game.cursor.mapX=((window.innerWidth+player.width)/2-e.clientX)/7,Game.cursor.mapY=(window.innerHeight+player.height-i)/7;const o=Game.cursor.events.hover.length;if(o>-1){const e=Game.cursor.events.hover;for(var s=0;s<o;s++){const o=e[s];t<=o.x+o.width&&o.x<=t&&i<=o.y+o.height&&o.y<=i?o.active||(o.onEvent(),o.active=!0):o.active&&(o.onStop(),o.active=!1)}}});var addToGeneric=function(){this.parentCheck(),Game.ctx.fillStyle=this.color;let e=this.x,t=this.y,i=this.chunk,o=i.x,s=i.y;Game.ctx.fillRect(map.refX+e,map.refY+t,this.width,this.height),e<o?(this.sX*=-1,e=o):e>o+map.width-this.width&&(this.sX*=-1,e=o+map.width-this.width),t<s?(this.sY*=-1,t=s):t>s+map.height-this.height&&(this.sY*=-1,t=s+map.height-this.height),collide(this,()=>{player.events[0].on&&!this.noHit?this.onHit(1):player.noHit||player.events[0].on||player.onHit(this.dmg)}),this.x=e+this.sX,this.y=t+this.sY};Game.entities.properties.generic_enemy.update=addToGeneric,Game.entities.properties.generic_enemy_nohealth.update=addToGeneric;const collide=(e,t)=>{player.x<=e.x+e.width&&e.x<=player.x+player.width&&player.y<=e.y+e.height&&e.y<=player.y+player.height&&t()},map={width:void 0,height:void 0,x:void 0,y:void 0,contents:void 0,all:void 0,refX:void 0,refY:void 0,update:function(e){this.contents=levels.autoGenerated[e].contents,this.width=levels.autoGenerated[e].grid.width,this.height=levels.autoGenerated[e].grid.height,this.all=levels.autoGenerated[e].grid.all}},constructors={event:(e,t,i,o,s)=>({name:e,currentCooldown:0,condition:i,key:t,whenHappen:o,whenNo:s,on:!1}),event1:(e,t)=>({name:e,whenHappen:t,on:!1}),mouseEventHover:(e,t,i,o,s,n,a,l)=>{Game.cursor.events.hover.push({id:e,x:t,y:i,width:o,height:s,onEvent:n,onStop:a,onResize:l,active:!1})},text:(e,t,i)=>{Game.text.all.push({font:Game.text.fontFamily,size:Game.text.fontSize,x:e,y:t,content:i})},entity:{enemy:function(e,t,i,o,s,n,a,l,r,c,h){Game.entities.all.push({id:void 0,parentId:h,parentAlive:!1,chunk:map.all[c],chunkNmb:c,know:[!1,!1],hp:t,totalHP:t,type:"enemy",subtype:e,x:i,y:o,sX:s,sY:n,dmg:r,color:colors.entities.enemy.normal,del:!1,noHit:!1,width:a,height:l,parentCheck:Game.entities.properties.parentCheck,onHit:void 0,update:function(){switch(this.id=id.new(),void 0===this.parentId&&(this.parentCheck=(()=>{})),void 0===this.dmg&&(this.dmg=1),this.subtype){case"nohealth":this.onHit=Game.entities.properties.generic_enemy_nohealth.onHit,this.update=Game.entities.properties.generic_enemy_nohealth.update,this.onPlayerCollide=Game.entities.properties.generic_enemy_nohealth.onPlayerCollide;break;case"generic":this.onHit=Game.entities.properties.generic_enemy.onHit,this.update=Game.entities.properties.generic_enemy.update,this.onPlayerCollide=Game.entities.properties.generic_enemy.onPlayerCollide;break;case"boss1":this.onHit=Game.entities.properties.boss1.onHit,this.update=Game.entities.properties.boss1.update;break;case"boss2":this.onHit=Game.entities.properties.boss2.onHit,this.update=Game.entities.properties.boss2.update}}})},bonus:function(e,t,i,o,s,n){Game.entities.all.push({chunk:map.all[n],type:"bonus",subtype:e,x:t,y:i,del:!1,color:colors.entities.bonus.health,width:o,height:s,onHit:()=>{},update:function(){switch(this.subtype){case"health":this.update=Game.entities.properties.health.update}}})},bonusMove:function(e,t,i,o,s,n,a,l,r){Game.entities.all.push({parentId:r,chunk:map.all[l],type:"bonusMove",subtype:e,x:t,y:i,sX:o,sY:s,del:!1,color:colors.entities.bonusMove.slow,width:n,height:a,parentCheck:Game.entities.properties.parentCheck,update:function(){switch(void 0===this.parentId&&(this.parentCheck=(()=>{})),this.subtype){case"slow":this.update=Game.entities.properties.slowBonus.update}}})},particle:function(e,t,i,o,s,n,a,l,r){Game.entities.all.push({chunk:map.all[r],type:"particle",subtype:e,x:t,y:i,sX:o,sY:s,del:!1,width:n,height:a,update:function(){switch(setTimeout(()=>{this.del=!0},l),this.subtype){case"enprisonment":this.color=colors.entities.bonusMove.slow,this.update=Game.entities.properties.emprisonmentParticle.update;break;case"explosion":this.color=colors.entities.projectile.missile,this.update=Game.entities.properties.explosionParticle.update}}})},projectile:function(e,t,i,o,s,n,a,l,r,c){Game.entities.all.push({chunk:map.all[r],chunkNmb:r,parentId:c,id:id.new(),type:"projectile",subtype:e,x:t,y:i,dmg:l,sX:o,sY:s,parentCheck:Game.entities.properties.parentCheck,del:!1,width:n,height:a,update:function(){switch(void 0===this.parentId&&(this.parentCheck=(()=>{})),this.subtype){case"bullet":this.color=colors.entities.projectile.bullet,this.update=Game.entities.properties.bullet.update;break;case"missile":this.color=colors.entities.projectile.missile,this.update=Game.entities.properties.missile.update}}})}}},know=[],player={health:10,totalHealth:10,currentChunkNumber:0,chunk:void 0,x:0,y:0,iX:0,iY:0,sX:0,sY:0,lX:5,lY:5,nX:.5,nY:.5,lvl:0,exp:0,color:colors.entities.player.normal,width:20,height:20,invulnerable:e=>{player.noHit=!0,player.color=colors.entities.player.invulnerable,setTimeout(()=>{player.color=colors.entities.player.normal,player.noHit=!1},Game.tick*e)},onHit:e=>{if(!0===valid(e,"function player.onHit")){player.health-=e,$D[1]("health").innerHTML=`You have ${player.health} points of health of a total of ${player.totalHealth}.`,player.health<=0&&Game.restart();let t=-100/player.totalHealth*player.health;const i=$D[1]("healthFill"),o=40*Game.tick;player.invulnerable(40);const s=$D[1]("healthNew");i.style.transition=o+"ms";const n=$D[1]("healthBackground");n.style.animation="rotate 1 "+o+"ms",s.style.animation=e>0?"damaged 1 "+o+"ms":"healed 1 "+o+"ms",i.style.transform="translateY("+t+"%)",setTimeout(()=>{n.style="",s.style=""},o)}},noHit:!1,events:[constructors.event("Dash"," ",()=>0===player.events[0].currentCooldown,()=>{Game.cooldowns.dash.active=!0,player.invulnerable(20);const e=player.events[0];e.on=!0,e.currentCooldown=1,player.lX*=3,player.lY*=3,player.nX*=4,player.nY*=4,setTimeout(()=>{e.on=!1,player.lX/=3,player.lY/=3,player.nX/=4,player.nY/=4,setTimeout(()=>{e.currentCooldown=0},60*Game.tick)},10*Game.tick)},()=>{}),constructors.event("Speed","Shift",()=>0===player.events[1].currentCooldown,()=>{Game.cooldowns.speed.active=!0;const e=player.events[1];e.on=!0,e.currentCooldown=1,player.lX*=2,player.lY*=2,setTimeout(()=>{e.on=!1,player.lX/=2,player.lY/=2,setTimeout(()=>{e.currentCooldown=0},160*Game.tick)},40*Game.tick)},()=>{})],eventByCall:[()=>{player.lX/=5,player.lY/=5,player.nX/=5,player.nY/=5;const e=e=>{(()=>{for(let e=0;e<10;e++)constructors.entity.particle("enprisonment",player.x+$F[1](),player.y+$F[1](),$F[0](),$F[0](),5,5,40*Game.tick,player.currentChunkNumber)})(),setTimeout(e,10*Game.tick)};e(()=>{e(()=>{e(()=>{e(()=>{e(()=>{player.lX*=5,player.lY*=5,player.nX*=5,player.nY*=5},Game.tick)})})})})}],update:function(){Game.ctx.fillStyle=this.color;let e=player.sX,t=player.sY,i=player.lY,o=player.lX,s=Game.keys,n=player.x,a=player.y,l=player.width,r=player.height,c=this.chunk,h=levels.autoGenerated[Game.index].grid.corridor[player.currentChunkNumber];Game.ctx.fillRect(map.x-player.width/2,map.y-player.height/2,l,r),Game.ctx.fillRect(55+n/8/2-l,55+a/8/2-r,l/2,r/2);let d=()=>{e>o?e=o:e<-1*o?e=-1*o:(s.a||s.ArrowLeft||s.A?(e-=player.nX,know[0]=!1):know[0]=!0,s.d||s.ArrowRight||s.D?(e+=player.nX,know[1]=!1):know[1]=!0,s.a&&s.A&&(Game.keys.A=!1,Game.keys.a=!1),s.d&&s.D&&(Game.keys.D=!1,Game.keys.d=!1),know[0]&&know[1]&&(e>0?e-=.1:e<0&&(e+=.1)))},m=()=>{t>i?t=i:t<-1*i?t=-1*i:(s.w||s.ArrowUp||s.W?(t-=player.nY,know[2]=!1):know[2]=!0,s.s||s.ArrowDown||s.S?(t+=player.nY,know[3]=!1):know[3]=!0,s.w&&s.W&&(Game.keys.W=!1,Game.keys.w=!1),s.s&&s.S&&(Game.keys.S=!1,Game.keys.s=!1),know[2]&&know[3]&&(t>0?t-=.1:t<0&&(t+=.1)))};Game.corridorsVisible?n<=h.x+h.width&&h.x<=n+l&&a<=h.y+h.height&&h.y<=a+r?(d(),a<h.y?(t=0,a=h.y):a>h.y+h.height-r?(t=0,a=h.y+h.height-r):m()):n<=h.x+h.width+l+o&&h.x<=n+l&&a<=h.y+h.height&&h.y<=a+r?(Game.corridorsVisible=!1,player.currentChunkNumber++,player.chunk=map.all[player.currentChunkNumber]):(n<c.x+e?(e=0,n=c.x):n>c.x+map.width-l?(e=0,n=c.x+map.width-l):d(),a<c.y+t?(t=0,a=c.y):a>c.y+map.height-r?(t=0,a=c.y+map.height-r):m()):(n<c.x?(e=0,n=c.x):n>c.x+map.width-l?(e=0,n=c.x+map.width-l):d(),a<c.y?(t=0,a=c.y):a>c.y+map.height-r?(t=0,a=c.y+map.height-r):m()),player.sX=e,player.x=n+e,player.sY=t,player.y=a+t}};</script>
</body>

</html>
